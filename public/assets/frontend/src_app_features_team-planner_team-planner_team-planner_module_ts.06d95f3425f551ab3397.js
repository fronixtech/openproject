"use strict";(self.webpackChunkopenproject_frontend=self.webpackChunkopenproject_frontend||[]).push([["src_app_features_team-planner_team-planner_team-planner_module_ts"],{36636:(ie,Ze,y)=>{y.r(Ze),y.d(Ze,{TeamPlannerModule:()=>Q});var W=y(54364),$e=y(84906),Se=y(32853),Ce=y(76910),cn=y(53875),un=y(74990),dn=y(32824),fn=y(99250),pn=y(46430),hn=y(85603),vn=y(1813),N=y(3786),gn=y(57973),mn=y(11266),yn=y(22956),bn=y(77434),wn=y(91654),Sn=y(52025),Ye=y(17281),q=y(76491),Je=y(44022),Cn=y(7493),ae=y(96617),se=y(18640),l=y(2316);class U{constructor(t,e,r,o){this.authorisation=t,this.schemaCache=e,this.calendarService=r,this.I18n=o,this.draggableWorkPackages$=new q.X([]),this.isDragging$=new q.X(void 0),this.text={draggingDisabled:{permissionDenied:this.I18n.t("js.team_planner.modify.errors.permission_denied"),fallback:this.I18n.t("js.team_planner.modify.errors.fallback")}}}destroyDrake(){this.drake&&this.drake.destroy()}registerDrag(t,e){this.drake=dragula({containers:[t.nativeElement],revertOnSpill:!0}),this.drake.on("drag",r=>{r.classList.add("gu-transit"),this.isDragging$.next(r.dataset.dragHelperId)}),this.drake.on("dragend",()=>{this.isDragging$.next(void 0)}),new Ye.es(t.nativeElement,{itemSelector:e,mirrorSelector:".gu-mirror",eventData:this.eventData.bind(this)})}handleDrop(t){this.draggableWorkPackages$.next(this.draggableWorkPackages$.value.filter(e=>e.id!==t.id))}handleDropError(t){const e=this.draggableWorkPackages$.value;1===e.filter(o=>o.id===t.id).length||this.draggableWorkPackages$.next(e.concat(t))}workPackageDisabledExplanation(t){const e=this.workPackageDisabled(t);return e.disabled&&e.reason?e.reason:""}workPackageDisabled(t){return this.authorisation.can("work_packages","editWorkPackage")?this.calendarService.dateEditable(t)?{disabled:!1}:{disabled:!0,reason:this.text.draggingDisabled.fallback}:{disabled:!0,reason:this.text.draggingDisabled.permissionDenied}}eventData(t){const e=t.dataset.dragHelperId;if(!e)return;const r=this.draggableWorkPackages$.value.find(u=>u.id===e);if(!r)return;const o=moment(r.startDate),s=moment(r.dueDate).diff(o,"days")+1;return{id:`${r.href}-external`,title:r.subject,duration:{days:s||1},extendedProps:{workPackage:r}}}}U.\u0275fac=function(t){return new(t||U)(l.LFG(Cn.g),l.LFG(Je.y),l.LFG(se.j),l.LFG(ae.D))},U.\u0275prov=l.Yz7({token:U,factory:U.\u0275fac});var xn=y(35561),Qe=y(44838),le=y(87916);const Xe=(0,le.aD)("[Team planner] Event removed from team planner",(0,le.NQ)()),Ke=(0,le.aD)("[Team planner] External event added to the team planner",(0,le.NQ)());var Rn=y(29161),xe=y(60419),_n=y(77616),En=y(81628);function Dn(n,t){if(1&n&&l._UZ(0,"op-back-button",11),2&n){const e=l.oxw();l.Q6J("customBackMethod",e.backButtonCallback)}}function Pn(n,t){if(1&n&&(l.TgZ(0,"li",15),l._UZ(1,"ndc-dynamic",16),l.qZA()),2&n){const e=l.oxw().$implicit,r=l.oxw(2);l.Q6J("ngClass",e.containerClasses),l.xp6(1),l.Q6J("ndcDynamicComponent",e.component)("ndcDynamicInputs",e.inputs)("ndcDynamicInjector",r.injector)("ndcDynamicOutputs",e.outputs)}}function kn(n,t){if(1&n&&(l.ynx(0),l.YNc(1,Pn,2,5,"li",14),l.BQk()),2&n){const e=t.$implicit;l.xp6(1),l.Q6J("ngIf",!e.show||e.show())}}function Tn(n,t){if(1&n&&(l.TgZ(0,"ul",12),l.YNc(1,kn,2,1,"ng-container",13),l.qZA()),2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngForOf",e.toolbarButtonComponents)}}function In(n,t){if(1&n&&l._UZ(0,"ndc-dynamic",17),2&n){const e=l.oxw();l.Q6J("ndcDynamicComponent",e.filterContainerDefinition.component)("ndcDynamicInputs",e.filterContainerDefinition.inputs)("ndcDynamicOutputs",e.filterContainerDefinition.outputs)("ndcDynamicInjector",e.injector)}}let j=class extends gn.r{constructor(){super(...arguments),this.text={title:this.I18n.t("js.team_planner.title"),unsaved_title:this.I18n.t("js.team_planner.unsaved_title")},this.selectedTitle=this.text.unsaved_title,this.filterContainerDefinition={component:bn.J},this.currentPartition="-split",this.showToolbar=!0,this.titleEditingEnabled=!1,this.showToolbarSaveButton=!0,this.toolbarDisabled=!1,this.toolbarButtonComponents=[{component:xn.P},{component:yn.U},{component:mn.a},{component:Sn.b,containerClasses:"hidden-for-mobile",show:()=>this.authorisationService.can("query","updateImmediately"),inputs:{hideTableOptions:!0}}]}ngOnInit(){super.ngOnInit(),this.wpTableFilters.hidden.push("assignee","startDate","dueDate","memberOfGroup","assignedToRole","assigneeOrGroup","project")}setPartition(t){var e;this.currentPartition=(null===(e=t.data)||void 0===e?void 0:e.partition)||"-split"}staticQueryName(t){return this.text.unsaved_title}loadInitialQuery(){}reloadOnEventAdded(){this.refresh(!1,!1)}};j.\u0275fac=function(){let n;return function(e){return(n||(n=l.n5z(j)))(e||j)}}(),j.\u0275cmp=l.Xpm({type:j,selectors:[["ng-component"]],features:[l._Bn([wn.E,se.j,U]),l.qOj],decls:11,vars:8,consts:[[1,"work-packages-partitioned-query-space--container",3,"ngClass"],[1,"toolbar-container","-editable"],[1,"toolbar"],["class","op-back-button","linkClass","op-back-button_mobile-full-width",3,"customBackMethod",4,"ngIf"],[3,"title","inFlight","showSaveCondition","editable","onSave","onEmptySubmit"],["class","toolbar-items hide-when-print",4,"ngIf"],[1,"work-packages-partitioned-query-space--filter-area"],[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicOutputs","ndcDynamicInjector",4,"ngIf"],[1,"work-packages-partitioned-page--content-container"],["data-indicator-name","table","ui-view","content-left",1,"work-packages-partitioned-page--content-left","loading-indicator--location"],["ui-view","content-right",1,"work-packages-partitioned-page--content-right"],["linkClass","op-back-button_mobile-full-width",1,"op-back-button",3,"customBackMethod"],[1,"toolbar-items","hide-when-print"],[4,"ngFor","ngForOf"],["class","toolbar-item",3,"ngClass",4,"ngIf"],[1,"toolbar-item",3,"ngClass"],[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicInjector","ndcDynamicOutputs"],[3,"ndcDynamicComponent","ndcDynamicInputs","ndcDynamicOutputs","ndcDynamicInjector"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"div",2),l.YNc(3,Dn,1,1,"op-back-button",3),l.TgZ(4,"editable-toolbar-title",4),l.NdJ("onSave",function(o){return e.changeChangesFromTitle(o)})("onEmptySubmit",function(){return e.updateTitleName("")}),l.qZA(),l.YNc(5,Tn,2,1,"ul",5),l.qZA(),l.qZA(),l.TgZ(6,"div",6),l.YNc(7,In,1,4,"ndc-dynamic",7),l.qZA(),l.TgZ(8,"div",8),l._UZ(9,"div",9),l._UZ(10,"div",10),l.qZA(),l.qZA()),2&t&&(l.Q6J("ngClass",e.currentPartition),l.xp6(3),l.Q6J("ngIf",e.backButtonCallback),l.xp6(1),l.Q6J("title",e.selectedTitle)("inFlight",e.toolbarDisabled)("showSaveCondition",e.showToolbarSaveButton)("editable",e.titleEditingEnabled),l.xp6(1),l.Q6J("ngIf",e.showToolbar),l.xp6(2),l.Q6J("ngIf",e.filterContainerDefinition))},directives:[W.mk,W.O5,_n.s5,$e.UIView,En.W,W.sg,Se.B5,Se.oc],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px #0000001a;z-index:10000!important}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;display:grid;grid-template-columns:1fr;grid-template-rows:auto auto minmax(200px,1fr);margin-left:-10px;padding-left:10px;width:calc(100% + 10px)}.work-packages-partitioned-query-space--container.-right-only[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%]{display:none}.work-packages-partitioned-query-space--container.-right-only[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%]{flex-grow:1}.work-packages-partitioned-query-space--container.-left-only[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%]{display:none}.work-packages-partitioned-query-space--container.-left-only[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%]{overflow:auto}.work-packages-partitioned-query-space--container.-left-only[_ngcontent-%COMP%]   wp-resizer[_ngcontent-%COMP%]{display:none}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]{display:flex;overflow:auto;scrollbar-color:transparent transparent;scrollbar-width:thin}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#DDDDDD;visibility:hidden}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]:hover{scrollbar-color:#DDDDDD transparent}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-container[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%], .work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%]{position:relative}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%]{flex:1}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .title-container_editable[_ngcontent-%COMP%]{margin-left:-7px}@media only screen and (max-width: 679px){.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-left[_ngcontent-%COMP%], .work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .work-packages-partitioned-page--content-right[_ngcontent-%COMP%]{min-width:initial;max-width:100vw;max-height:100%}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto;justify-items:start}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .op-back-button[_ngcontent-%COMP%]{grid-column:1/3;grid-row:1/2}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{grid-column:1/2;grid-row:2/3;overflow:hidden}.work-packages-partitioned-query-space--container[_ngcontent-%COMP%]   .toolbar[_ngcontent-%COMP%]   .toolbar-items[_ngcontent-%COMP%]{grid-column:2/3;grid-row:2/3}}"],changeDetection:0}),(0,N.gn)([(0,Rn.W)(),(0,N.w6)("design:type",xe.b)],j.prototype,"actions$",void 0),(0,N.gn)([(0,Qe.B)(Ke),(0,N.w6)("design:type",Function),(0,N.w6)("design:paramtypes",[]),(0,N.w6)("design:returntype",void 0)],j.prototype,"reloadOnEventAdded",null),j=(0,N.gn)([Qe.b],j);var et=y(79441),G=y(61486),O=y(33927),Re=y(9170),tt=y(79902),_e=y(1143),nt=y(92597),X=y(80639),On=y(85816),rt=y(83720),Ee=y(53466),ot=y(17163),Mn=y(71435),a=(y(60218),y(12051)),zn="2021-11-03",Wn=["GPL-My-Project-Is-Open-Source","CC-Attribution-NonCommercial-NoDerivatives"],jn={position:"absolute",zIndex:99999,bottom:"1px",left:"1px",background:"#eee",borderColor:"#ddd",borderStyle:"solid",borderWidth:"1px 1px 0 0",padding:"2px 4px",fontSize:"12px",borderTopRightRadius:"3px"};var Bn={schedulerLicenseKey:String};const ce=(0,a.rxu)({optionRefiners:Bn,viewContainerAppends:[function(n){var t=n.options.schedulerLicenseKey;if(!function(n){return/\w+:\/\/fullcalendar\.io\/|\/examples\/[\w-]+\.html$/.test(n)}("undefined"!=typeof window?window.location.href:"")){var r=function(n){if(-1!==Wn.indexOf(n))return"valid";var t=(n||"").match(/^(\d+)-fcs-(\d+)$/);if(t&&10===t[1].length){var e=new Date(1e3*parseInt(t[2],10)),r=new Date(a.vc.mockSchedulerReleaseDate||zn);if((0,a.qbb)(r))return(0,a.E4D)(r,-372)<e?"valid":"outdated"}return"invalid"}(t);if("valid"!==r)return(0,a.azq)("div",{className:"fc-license-message",style:jn},"outdated"===r?(0,a.azq)(a.HYg,null,"Your license key is too old to work with this version. ",(0,a.azq)("a",{href:"http://fullcalendar.io/docs/schedulerLicenseKey#outdated"},"More Info")):(0,a.azq)(a.HYg,null,"Your license key is invalid. ",(0,a.azq)("a",{href:"http://fullcalendar.io/docs/schedulerLicenseKey#invalid"},"More Info")))}return null}]});y(47445);var De=function(n,t){return(De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};function T(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}De(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var M=function(){return(M=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;var Pe=function(n,t){return(Pe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};function st(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}Pe(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var de=function(){return(de=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;function B(n,t,e){if(e||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return n.concat(i||Array.prototype.slice.call(t))}Object.create;var pt,ut="wheel mousewheel DomMouseScroll MozMousePixelScroll".split(" "),dt=function(){function n(t){var e=this;this.el=t,this.emitter=new a.Q5$,this.isScrolling=!1,this.isTouching=!1,this.isRecentlyWheeled=!1,this.isRecentlyScrolled=!1,this.wheelWaiter=new a.snJ(this._handleWheelWaited.bind(this)),this.scrollWaiter=new a.snJ(this._handleScrollWaited.bind(this)),this.handleScroll=function(){e.startScroll(),e.emitter.trigger("scroll",e.isRecentlyWheeled,e.isTouching),e.isRecentlyScrolled=!0,e.scrollWaiter.request(500)},this.handleWheel=function(){e.isRecentlyWheeled=!0,e.wheelWaiter.request(500)},this.handleTouchStart=function(){e.isTouching=!0},this.handleTouchEnd=function(){e.isTouching=!1,e.isRecentlyScrolled||e.endScroll()},t.addEventListener("scroll",this.handleScroll),t.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),t.addEventListener("touchend",this.handleTouchEnd);for(var r=0,o=ut;r<o.length;r++){var i=o[r];t.addEventListener(i,this.handleWheel)}}return n.prototype.destroy=function(){var t=this.el;t.removeEventListener("scroll",this.handleScroll),t.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),t.removeEventListener("touchend",this.handleTouchEnd);for(var e=0,r=ut;e<r.length;e++){var o=r[e];t.removeEventListener(o,this.handleWheel)}},n.prototype.startScroll=function(){this.isScrolling||(this.isScrolling=!0,this.emitter.trigger("scrollStart",this.isRecentlyWheeled,this.isTouching))},n.prototype.endScroll=function(){this.isScrolling&&(this.emitter.trigger("scrollEnd"),this.isScrolling=!1,this.isRecentlyScrolled=!0,this.isRecentlyWheeled=!1,this.scrollWaiter.clear(),this.wheelWaiter.clear())},n.prototype._handleScrollWaited=function(){this.isRecentlyScrolled=!1,this.isTouching||this.endScroll()},n.prototype._handleWheelWaited=function(){this.isRecentlyWheeled=!1},n}();function ft(n){var t=n.scrollLeft;if("rtl"===window.getComputedStyle(n).direction)switch(ht()){case"negative":t*=-1;case"reverse":t=n.scrollWidth-t-n.clientWidth}return t}function Jn(n,t){if("rtl"===window.getComputedStyle(n).direction)switch(ht()){case"reverse":t=n.scrollWidth-t;break;case"negative":t=-(n.scrollWidth-t)}n.scrollLeft=t}function ht(){return pt||((n=document.createElement("div")).style.position="absolute",n.style.top="-1000px",n.style.width="1px",n.style.height="1px",n.style.overflow="scroll",n.style.direction="rtl",n.style.fontSize="100px",n.innerHTML="A",document.body.appendChild(n),n.scrollLeft>0?t="positive":(n.scrollLeft=1,t=n.scrollLeft>0?"reverse":"negative"),(0,a.bXf)(n),pt=t);var t,n}var ke,Xn="undefined"!=typeof navigator&&/Edge/.test(navigator.userAgent),er=function(){function n(t,e){var r=this;this.scrollEl=t,this.isRtl=e,this.usingRelative=null,this.updateSize=function(){var o=r.scrollEl,i=(0,a.xlG)(o,".fc-sticky"),s=r.queryElGeoms(i),u=o.clientWidth,d=o.clientHeight;r.usingRelative?function(n,t,e,r,o){n.forEach(function(i,s){var h,v,u=t[s],d=u.naturalBound,c=u.parentBound,f=c.right-c.left,p=c.bottom-c.bottom;f>r||p>o?(h=e[s].left-d.left,v=e[s].top-d.top):(h="",v=""),(0,a.bg6)(i,{position:"relative",left:h,right:-h,top:v})})}(i,s,r.computeElDestinations(s,u),u,d):function(n,t,e){n.forEach(function(r,o){var f,i=t[o],s=i.textAlign,u=i.elWidth,d=i.parentBound,c=d.right-d.left;f="center"===s&&c>e?(e-u)/2:"",(0,a.bg6)(r,{left:f,right:f,top:0})})}(i,s,u)},this.usingRelative=(null==ke&&(ke=function(){var n=document.createElement("div");n.style.position="sticky",document.body.appendChild(n);var t=window.getComputedStyle(n).position;return(0,a.bXf)(n),"sticky"===t}()),!ke||Xn&&e),this.usingRelative&&(this.listener=new dt(t),this.listener.emitter.on("scrollEnd",this.updateSize))}return n.prototype.destroy=function(){this.listener&&this.listener.destroy()},n.prototype.queryElGeoms=function(t){for(var r=this.scrollEl,o=this.isRtl,i=function(n){var t=n.getBoundingClientRect(),e=(0,a.ld2)(n);return{left:t.left+e.borderLeft+e.scrollbarLeft-ft(n),top:t.top+e.borderTop-n.scrollTop}}(r),s=[],u=0,d=t;u<d.length;u++){var c=d[u],f=(0,a.sZq)((0,a.skW)(c.parentNode,!0,!0),-i.left,-i.top),p=c.getBoundingClientRect(),h=window.getComputedStyle(c),v=window.getComputedStyle(c.parentNode).textAlign,g=null;"start"===v?v=o?"right":"left":"end"===v&&(v=o?"left":"right"),"sticky"!==h.position&&(g=(0,a.sZq)(p,-i.left-(parseFloat(h.left)||0),-i.top-(parseFloat(h.top)||0))),s.push({parentBound:f,naturalBound:g,elWidth:p.width,elHeight:p.height,textAlign:v})}return s},n.prototype.computeElDestinations=function(t,e){var r=this.scrollEl,o=r.scrollTop,i=ft(r),s=i+e;return t.map(function(u){var h,v,d=u.elWidth,c=u.elHeight,f=u.parentBound,p=u.naturalBound;switch(u.textAlign){case"left":h=i;break;case"right":h=s-d;break;case"center":h=(i+s)/2-d/2}return h=Math.min(h,f.right-d),h=Math.max(h,f.left),v=o,v=Math.min(v,f.bottom-c),{left:h,top:v=Math.max(v,p.top)}})},n}();var ir=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.elRef=(0,a.VfA)(),e.state={xScrollbarWidth:0,yScrollbarWidth:0},e.handleScroller=function(r){e.scroller=r,(0,a.k$v)(e.props.scrollerRef,r)},e.handleSizing=function(){var r=e.props;"scroll-hidden"===r.overflowY&&e.setState({yScrollbarWidth:e.scroller.getYScrollbarWidth()}),"scroll-hidden"===r.overflowX&&e.setState({xScrollbarWidth:e.scroller.getXScrollbarWidth()})},e}return st(t,n),t.prototype.render=function(){var e=this,r=e.props,o=e.state,s=e.context.isRtl&&(0,a.qDX)(),u=0,d=0,c=0;return"scroll-hidden"===r.overflowX&&(c=o.xScrollbarWidth),"scroll-hidden"===r.overflowY&&null!=o.yScrollbarWidth&&(s?u=o.yScrollbarWidth:d=o.yScrollbarWidth),(0,a.azq)("div",{ref:this.elRef,className:"fc-scroller-harness"+(r.liquid?" fc-scroller-harness-liquid":"")},(0,a.azq)(a.Ttm,{ref:this.handleScroller,elRef:this.props.scrollerElRef,overflowX:"scroll-hidden"===r.overflowX?"scroll":r.overflowX,overflowY:"scroll-hidden"===r.overflowY?"scroll":r.overflowY,overcomeLeft:u,overcomeRight:d,overcomeBottom:c,maxHeight:"number"==typeof r.maxHeight?r.maxHeight+("scroll-hidden"===r.overflowX?o.xScrollbarWidth:0):"",liquid:r.liquid,liquidIsAbsolute:!0},r.children))},t.prototype.componentDidMount=function(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)},t.prototype.componentDidUpdate=function(e){(0,a.S6v)(e,this.props)||this.handleSizing()},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleSizing)},t.prototype.needsXScrolling=function(){return this.scroller.needsXScrolling()},t.prototype.needsYScrolling=function(){return this.scroller.needsYScrolling()},t}(a.H6J),ar=function(){function n(t,e){var r=this;this.isVertical=t,this.scrollEls=e,this.isPaused=!1,this.scrollListeners=e.map(function(o){return r.bindScroller(o)})}return n.prototype.destroy=function(){for(var t=0,e=this.scrollListeners;t<e.length;t++){e[t].destroy()}},n.prototype.bindScroller=function(t){var e=this,o=this.scrollEls,i=this.isVertical,s=new dt(t);return s.emitter.on("scroll",function(c,f){if(!e.isPaused&&((!e.masterEl||e.masterEl!==t&&(c||f))&&e.assignMaster(t),e.masterEl===t))for(var p=0,h=o;p<h.length;p++){var v=h[p];v!==t&&(i?v.scrollTop=t.scrollTop:v.scrollLeft=t.scrollLeft)}}),s.emitter.on("scrollEnd",function(){e.masterEl===t&&(e.masterEl=null)}),s},n.prototype.assignMaster=function(t){this.masterEl=t;for(var e=0,r=this.scrollListeners;e<r.length;e++){var o=r[e];o.el!==t&&o.endScroll()}},n.prototype.forceScrollLeft=function(t){this.isPaused=!0;for(var e=0,r=this.scrollListeners;e<r.length;e++){Jn(r[e].el,t)}this.isPaused=!1},n.prototype.forceScrollTop=function(t){this.isPaused=!0;for(var e=0,r=this.scrollListeners;e<r.length;e++){r[e].el.scrollTop=t}this.isPaused=!1},n}(),pe=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.compileColGroupStats=(0,a.ums)(ur,fr),e.renderMicroColGroups=(0,a.ums)(a.hgf),e.clippedScrollerRefs=new a.lAU,e.scrollerElRefs=new a.lAU(e._handleScrollerEl.bind(e)),e.chunkElRefs=new a.lAU(e._handleChunkEl.bind(e)),e.getStickyScrolling=(0,a.ums)(pr,null,yt),e.getScrollSyncersBySection=(0,a.E0)(mt.bind(e,!0),null,he),e.getScrollSyncersByColumn=(0,a.E0)(mt.bind(e,!1),null,he),e.stickyScrollings=[],e.scrollSyncersBySection={},e.scrollSyncersByColumn={},e.rowUnstableMap=new Map,e.rowInnerMaxHeightMap=new Map,e.anyRowHeightsChanged=!1,e.recentSizingCnt=0,e.state={shrinkWidths:[],forceYScrollbars:!1,forceXScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{},sectionRowMaxHeights:[]},e.handleSizing=function(r,o){if(e.allowSizing()){o||(e.anyRowHeightsChanged=!0);var i={};(r||!o&&!e.rowUnstableMap.size)&&(i.sectionRowMaxHeights=e.computeSectionRowMaxHeights()),e.setState(de(de({shrinkWidths:e.computeShrinkWidths()},e.computeScrollerDims()),i),function(){e.rowUnstableMap.size||e.updateStickyScrolling()})}},e.handleRowHeightChange=function(r,o){var i=e,s=i.rowUnstableMap,u=i.rowInnerMaxHeightMap;if(o){s.delete(r);var d=vt(r);(!u.has(r)||u.get(r)!==d)&&(u.set(r,d),e.anyRowHeightsChanged=!0),!s.size&&e.anyRowHeightsChanged&&(e.anyRowHeightsChanged=!1,e.setState({sectionRowMaxHeights:e.computeSectionRowMaxHeights()}))}else s.set(r,!0)},e}return st(t,n),t.prototype.render=function(){var e=this,r=e.props,o=e.state,i=e.context,s=o.shrinkWidths,u=this.compileColGroupStats(r.colGroups.map(function(E){return[E]})),d=this.renderMicroColGroups(u.map(function(E,R){return[E.cols,s[R]]})),c=(0,a.SR3)(r.liquid,i),f=this.getDims();f[0],f[1];for(var g,p=r.sections,h=p.length,v=0,m=[],b=[],S=[];v<h&&"header"===(g=p[v]).type;)m.push(this.renderSection(g,v,u,d,o.sectionRowMaxHeights,!0)),v+=1;for(;v<h&&"body"===(g=p[v]).type;)b.push(this.renderSection(g,v,u,d,o.sectionRowMaxHeights,!1)),v+=1;for(;v<h&&"footer"===(g=p[v]).type;)S.push(this.renderSection(g,v,u,d,o.sectionRowMaxHeights,!0)),v+=1;var C=!(0,a.X45)(),_={role:"rowgroup"};return(0,a.azq)("table",{ref:r.elRef,role:"grid",className:c.join(" ")},function(n,t){var e=n.map(function(r,o){var i=r.width;return"shrink"===i&&(i=r.totalColWidth+(0,a.fyp)(t[o])+1),(0,a.azq)("col",{style:{width:i}})});return a.azq.apply(void 0,B(["colgroup",{}],e))}(u,s),Boolean(!C&&m.length)&&a.azq.apply(void 0,B(["thead",_],m)),Boolean(!C&&b.length)&&a.azq.apply(void 0,B(["tbody",_],b)),Boolean(!C&&S.length)&&a.azq.apply(void 0,B(["tfoot",_],S)),C&&a.azq.apply(void 0,B(B(B(["tbody",_],m),b),S)))},t.prototype.renderSection=function(e,r,o,i,s,u){var d=this;return"outerContent"in e?(0,a.azq)(a.HYg,{key:e.key},e.outerContent):(0,a.azq)("tr",{key:e.key,role:"presentation",className:(0,a.PFj)(e,this.props.liquid).join(" ")},e.chunks.map(function(c,f){return d.renderChunk(e,r,o[f],i[f],c,f,(s[r]||[])[f]||[],u)}))},t.prototype.renderChunk=function(e,r,o,i,s,u,d,c){if("outerContent"in s)return(0,a.azq)(a.HYg,{key:s.key},s.outerContent);var f=this.state,p=f.scrollerClientWidths,h=f.scrollerClientHeights,v=this.getDims(),g=v[0],m=v[1],b=r*m+u,C=u===(!this.context.isRtl||(0,a.qDX)()?m-1:0),_=r===g-1,E=_&&f.forceXScrollbars,R=C&&f.forceYScrollbars,w=o&&o.allowXScrolling,D=(0,a.aDZ)(this.props,e),k=(0,a.VFE)(this.props,e),P=e.expandRows&&k,H=o&&o.totalColMinWidth||"",A=(0,a.Yvu)(e,s,{tableColGroupNode:i,tableMinWidth:H,clientWidth:void 0!==p[b]?p[b]:null,clientHeight:void 0!==h[b]?h[b]:null,expandRows:P,syncRowHeights:Boolean(e.syncRowHeights),rowSyncHeights:d,reportRowHeightChange:this.handleRowHeightChange},c),V=E?_?"scroll":"scroll-hidden":w?_?"auto":"scroll-hidden":"hidden",L=R?C?"scroll":"scroll-hidden":D?C?"auto":"scroll-hidden":"hidden";return A=(0,a.azq)(ir,{ref:this.clippedScrollerRefs.createRef(b),scrollerElRef:this.scrollerElRefs.createRef(b),overflowX:V,overflowY:L,liquid:k,maxHeight:e.maxHeight},A),(0,a.azq)(c?"th":"td",{key:s.key,ref:this.chunkElRefs.createRef(b),role:"presentation"},A)},t.prototype.componentDidMount=function(){this.updateScrollSyncers(),this.handleSizing(!1),this.context.addResizeHandler(this.handleSizing)},t.prototype.componentDidUpdate=function(e,r){this.updateScrollSyncers(),this.handleSizing(!1,r.sectionRowMaxHeights!==this.state.sectionRowMaxHeights)},t.prototype.componentWillUnmount=function(){this.context.removeResizeHandler(this.handleSizing),this.destroyStickyScrolling(),this.destroyScrollSyncers()},t.prototype.allowSizing=function(){var e=new Date;return!this.lastSizingDate||e.valueOf()>this.lastSizingDate.valueOf()+a.vc.SCROLLGRID_RESIZE_INTERVAL?(this.lastSizingDate=e,this.recentSizingCnt=0,!0):(this.recentSizingCnt+=1)<=10},t.prototype.computeShrinkWidths=function(){var e=this,r=this.compileColGroupStats(this.props.colGroups.map(function(c){return[c]})),o=this.getDims(),i=o[0],s=o[1],u=i*s,d=[];return r.forEach(function(c,f){if(c.hasShrinkCol){var p=e.chunkElRefs.collect(f,u,s);d[f]=(0,a.VVk)(p)}}),d},t.prototype.computeSectionRowMaxHeights=function(){for(var e=new Map,r=this.getDims(),o=r[0],i=r[1],s=[],u=0;u<o;u+=1){var d=this.props.sections[u],c=[];if(d&&d.syncRowHeights){for(var f=[],p=0;p<i;p+=1){var h=u*i+p,v=[],g=this.chunkElRefs.currentMap[h];v=g?(0,a.xlG)(g,".fc-scrollgrid-sync-table tr").map(function(L){var ln=vt(L);return e.set(L,ln),ln}):[],f.push(v)}var m=f[0].length,b=!0;for(p=1;p<i;p+=1){if(!(d.chunks[p]&&void 0!==d.chunks[p].outerContent)&&f[p].length!==m){b=!1;break}}if(b){for(p=0;p<i;p+=1)c.push([]);for(var P=0;P<m;P+=1){var H=[];for(p=0;p<i;p+=1){var A=f[p][P];null!=A&&H.push(A)}var V=Math.max.apply(Math,H);for(p=0;p<i;p+=1)c[p].push(V)}}else{var C=[];for(p=0;p<i;p+=1)C.push(sr(f[p])+f[p].length);var _=Math.max.apply(Math,C);for(p=0;p<i;p+=1){var E=f[p].length,R=_-E,w=Math.floor(R/E),D=R-w*(E-1),k=[];for((P=0)<E&&(k.push(D),P+=1);P<E;)k.push(w),P+=1;c.push(k)}}}s.push(c)}return this.rowInnerMaxHeightMap=e,s},t.prototype.computeScrollerDims=function(){for(var e=(0,a.ewu)(),r=this.getDims(),o=r[0],i=r[1],s=!this.context.isRtl||(0,a.qDX)()?i-1:0,u=o-1,d=this.clippedScrollerRefs.currentMap,c=this.scrollerElRefs.currentMap,f=!1,p=!1,h={},v={},g=0;g<o;g+=1){if((b=d[m=g*i+s])&&b.needsYScrolling()){f=!0;break}}for(var S=0;S<i;S+=1){var b;if((b=d[m=u*i+S])&&b.needsXScrolling()){p=!0;break}}for(g=0;g<o;g+=1)for(S=0;S<i;S+=1){var m,C=c[m=g*i+S];if(C){var _=C.parentNode;h[m]=Math.floor(_.getBoundingClientRect().width-(S===s&&f?e.y:0)),v[m]=Math.floor(_.getBoundingClientRect().height-(g===u&&p?e.x:0))}}return{forceYScrollbars:f,forceXScrollbars:p,scrollerClientWidths:h,scrollerClientHeights:v}},t.prototype.updateStickyScrolling=function(){var e=this.context.isRtl,r=this.scrollerElRefs.getAll().map(function(i){return[i,e]}),o=this.getStickyScrolling(r);o.forEach(function(i){return i.updateSize()}),this.stickyScrollings=o},t.prototype.destroyStickyScrolling=function(){this.stickyScrollings.forEach(yt)},t.prototype.updateScrollSyncers=function(){for(var e=this.getDims(),r=e[0],o=e[1],i=r*o,s={},u={},d=this.scrollerElRefs.currentMap,c=0;c<r;c+=1){var f=c*o,p=f+o;s[c]=(0,a.uPw)(d,f,p,1)}for(var h=0;h<o;h+=1)u[h]=this.scrollerElRefs.collect(h,i,o);this.scrollSyncersBySection=this.getScrollSyncersBySection(s),this.scrollSyncersByColumn=this.getScrollSyncersByColumn(u)},t.prototype.destroyScrollSyncers=function(){(0,a._aR)(this.scrollSyncersBySection,he),(0,a._aR)(this.scrollSyncersByColumn,he)},t.prototype.getChunkConfigByIndex=function(e){var r=this.getDims()[1],o=Math.floor(e/r),i=e%r,s=this.props.sections[o];return s&&s.chunks[i]},t.prototype.forceScrollLeft=function(e,r){var o=this.scrollSyncersByColumn[e];o&&o.forceScrollLeft(r)},t.prototype.forceScrollTop=function(e,r){var o=this.scrollSyncersBySection[e];o&&o.forceScrollTop(r)},t.prototype._handleChunkEl=function(e,r){var o=this.getChunkConfigByIndex(parseInt(r,10));o&&(0,a.k$v)(o.elRef,e)},t.prototype._handleScrollerEl=function(e,r){var o=this.getChunkConfigByIndex(parseInt(r,10));o&&(0,a.k$v)(o.scrollerElRef,e)},t.prototype.getDims=function(){var e=this.props.sections.length;return[e,e?this.props.sections[0].chunks.length:0]},t}(a.H6J);function sr(n){for(var t=0,e=0,r=n;e<r.length;e++){t+=r[e]}return t}function vt(n){var t=(0,a.xlG)(n,".fc-scrollgrid-sync-inner").map(lr);return t.length?Math.max.apply(Math,t):0}function lr(n){return n.offsetHeight}function ur(n){var t=gt(n.cols,"width"),e=gt(n.cols,"minWidth"),r=(0,a.Qa3)(n.cols);return{hasShrinkCol:r,totalColWidth:t,totalColMinWidth:e,allowXScrolling:"shrink"!==n.width&&Boolean(t||e||r),cols:n.cols,width:n.width}}function gt(n,t){for(var e=0,r=0,o=n;r<o.length;r++){var i=o[r],s=i[t];"number"==typeof s&&(e+=s*(i.span||1))}return e}pe.addStateEquality({shrinkWidths:a.CnA,scrollerClientWidths:a.S6v,scrollerClientHeights:a.S6v});var dr={cols:a.grx};function fr(n,t){return(0,a.cbN)(n,t,dr)}function mt(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return new ar(n,t)}function he(n){n.destroy()}function pr(n,t){return new er(n,t)}function yt(n){n.destroy()}(0,a.rxu)({deps:[ce],scrollGridImpl:pe});a.vc.SCROLLGRID_RESIZE_INTERVAL=500;a.vc.MAX_TIMELINE_SLOTS=1e3;var Te=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}];function bt(n,t,e,r){var o={labelInterval:e.slotLabelInterval,slotDuration:e.slotDuration};(function(n,t,e){var r=t.currentRange;if(n.labelInterval){e.countDurationsBetween(r.start,r.end,n.labelInterval)>a.vc.MAX_TIMELINE_SLOTS&&(console.warn("slotLabelInterval results in too many cells"),n.labelInterval=null)}if(n.slotDuration){e.countDurationsBetween(r.start,r.end,n.slotDuration)>a.vc.MAX_TIMELINE_SLOTS&&(console.warn("slotDuration results in too many cells"),n.slotDuration=null)}if(n.labelInterval&&n.slotDuration){var s=(0,a.ltK)(n.labelInterval,n.slotDuration);(null===s||s<1)&&(console.warn("slotLabelInterval must be a multiple of slotDuration"),n.slotDuration=null)}})(o,n,t),St(o,n,t),function(n,t,e){var r=t.currentRange,o=n.slotDuration;if(!o){for(var i=St(n,t,e),s=0,u=Te;s<u.length;s++){var d=u[s],c=(0,a.Pvs)(d),f=(0,a.ltK)(i,c);if(null!==f&&f>1&&f<=6){o=c;break}}if(o)e.countDurationsBetween(r.start,r.end,o)>200&&(o=null);o||(o=i),n.slotDuration=o}}(o,n,t);var i=e.slotLabelFormat,s=Array.isArray(i)?i:null!=i?[i]:function(n,t,e,r){var o,i,s=n.labelInterval,u=(0,a.NTx)(s).unit,d=r.weekNumbers,c=o=i=null;switch("week"===u&&!d&&(u="day"),u){case"year":c={year:"numeric"};break;case"month":Z("years",t,e)>1&&(c={year:"numeric"}),o={month:"short"};break;case"week":Z("years",t,e)>1&&(c={year:"numeric"}),o={week:"narrow"};break;case"day":Z("years",t,e)>1?c={year:"numeric",month:"long"}:Z("months",t,e)>1&&(c={month:"long"}),d&&(o={week:"short"}),i={weekday:"narrow",day:"numeric"};break;case"hour":d&&(c={week:"short"}),Z("days",t,e)>1&&(o={weekday:"short",day:"numeric",month:"numeric",omitCommas:!0}),i={hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"};break;case"minute":(0,a.dZD)(s)/60>=6?(c={hour:"numeric",meridiem:"short"},o=function(f){return":"+(0,a.SkG)(f.date.minute,2)}):c={hour:"numeric",minute:"numeric",meridiem:"short"};break;case"second":(0,a.nCP)(s)/60>=6?(c={hour:"numeric",minute:"2-digit",meridiem:"lowercase"},o=function(f){return":"+(0,a.SkG)(f.date.second,2)}):c={hour:"numeric",minute:"2-digit",second:"2-digit",meridiem:"lowercase"};break;case"millisecond":c={hour:"numeric",minute:"2-digit",second:"2-digit",meridiem:"lowercase"},o=function(f){return"."+(0,a.SkG)(f.millisecond,3)}}return[].concat(c||[],o||[],i||[])}(o,n,t,e);o.headerFormats=s.map(function(R){return(0,a.SPZ)(R)}),o.isTimeScale=Boolean(o.slotDuration.milliseconds);var u=null;if(!o.isTimeScale){var d=(0,a.NTx)(o.slotDuration).unit;/year|month|week/.test(d)&&(u=d)}o.largeUnit=u,o.emphasizeWeeks=1===(0,a.XrI)(o.slotDuration)&&Z("weeks",n,t)>=2&&!e.businessHours;var f,p,c=e.snapDuration;c&&(f=(0,a.Pvs)(c),p=(0,a.ltK)(o.slotDuration,f)),null==p&&(f=o.slotDuration,p=1),o.snapDuration=f,o.snapsPerSlot=p;var h=(0,a.TTZ)(n.slotMaxTime)-(0,a.TTZ)(n.slotMinTime),v=wt(n.renderRange.start,o,t),g=wt(n.renderRange.end,o,t);o.isTimeScale&&(v=t.add(v,n.slotMinTime),g=t.add((0,a.E4D)(g,-1),n.slotMaxTime)),o.timeWindowMs=h,o.normalizedRange={start:v,end:g};for(var m=[],b=v;b<g;)ge(b,o,n,r)&&m.push(b),b=t.add(b,o.slotDuration);o.slotDates=m;var S=-1,C=0,_=[],E=[];for(b=v;b<g;)ge(b,o,n,r)?(S+=1,_.push(S),E.push(C)):_.push(S+.5),b=t.add(b,o.snapDuration),C+=1;return o.snapDiffToIndex=_,o.snapIndexToDiff=E,o.snapCnt=S+1,o.slotCnt=o.snapCnt/o.snapsPerSlot,o.isWeekStarts=function(n,t){for(var e=n.slotDates,r=n.emphasizeWeeks,o=null,i=[],s=0,u=e;s<u.length;s++){var d=u[s],c=t.computeWeekNumber(d),f=r&&null!==o&&o!==c;o=c,i.push(f)}return i}(o,t),o.cellRows=function(n,t){for(var e=n.slotDates,r=n.headerFormats,o=r.map(function(){return[]}),i=(0,a.XrI)(n.slotDuration),s=7===i?"week":1===i?"day":null,u=r.map(function(E){return E.getLargestUnit?E.getLargestUnit():null}),d=0;d<e.length;d+=1)for(var c=e[d],f=n.isWeekStarts[d],p=0;p<r.length;p+=1){var h=r[p],v=o[p],g=v[v.length-1],m=p===r.length-1,b=r.length>1&&!m,S=null,C=u[p]||(m?s:null);if(b){var _=t.format(c,h);g&&g.text===_?g.colspan+=1:S=Ct(c,_,C)}else if(!g||(0,a.GNL)(t.countDurationsBetween(n.normalizedRange.start,c,n.labelInterval))){S=Ct(c,_=t.format(c,h),C)}else g.colspan+=1;S&&(S.weekStart=f,v.push(S))}return o}(o,t),o.slotsPerLabel=(0,a.ltK)(o.labelInterval,o.slotDuration),o}function wt(n,t,e){var r=n;return t.isTimeScale||(r=(0,a.b7Q)(r),t.largeUnit&&(r=e.startOf(r,t.largeUnit))),r}function ge(n,t,e,r){if(r.isHiddenDay(n))return!1;if(t.isTimeScale){var o=(0,a.b7Q)(n),s=n.valueOf()-o.valueOf()-(0,a.TTZ)(e.slotMinTime);return(s=(s%864e5+864e5)%864e5)<t.timeWindowMs}return!0}function St(n,t,e){var r=t.currentRange,o=n.labelInterval;if(!o){var i=void 0;if(n.slotDuration){for(var s=0,u=Te;s<u.length;s++){i=u[s];var d=(0,a.Pvs)(i),c=(0,a.ltK)(d,n.slotDuration);if(null!==c&&c<=6){o=d;break}}o||(o=n.slotDuration)}else for(var f=0,p=Te;f<p.length;f++){if(i=p[f],o=(0,a.Pvs)(i),e.countDurationsBetween(r.start,r.end,o)>=18)break}n.labelInterval=o}return o}function Z(n,t,e){var r=t.currentRange,o=null;return"years"===n?o=e.diffWholeYears(r.start,r.end):"months"===n||"weeks"===n?o=e.diffWholeMonths(r.start,r.end):"days"===n&&(o=(0,a.Lnh)(r.start,r.end)),o||0}function Ct(n,t,e){return{date:n,text:t,rowUnit:e,colspan:1,isWeekStart:!1}}var Cr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return T(t,n),t.prototype.render=function(){var r=this.props,o=this.context;return(0,a.azq)(a.rVp,{hookProps:r.hookProps,content:o.options.slotLabelContent,defaultContent:xr},function(i,s){return(0,a.azq)("a",M({ref:i,className:"fc-timeline-slot-cushion fc-scrollgrid-sync-inner"+(r.isSticky?" fc-sticky":"")},r.navLinkAttrs),s)})},t}(a.H6J);function xr(n){return n.text}function Rr(n){return{level:n.level,date:n.dateEnv.toDate(n.dateMarker),view:n.viewApi,text:n.text}}var _r=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.refineHookProps=(0,a.Vbb)(Rr),e.normalizeClassNames=(0,a.HgS)(),e.buildCellNavLinkAttrs=(0,a.HPs)(Er),e}return T(t,n),t.prototype.render=function(){var e=this,o=this.props,i=this.context,s=i.dateEnv,u=i.options,d=o.cell,c=o.dateProfile,f=o.tDateProfile,p=(0,a.iCZ)(d.date,o.todayRange,o.nowDate,c),h=["fc-timeline-slot","fc-timeline-slot-label"].concat("time"===d.rowUnit?(0,a.mK5)(p,i.theme):(0,a.yLW)(p,i.theme));d.isWeekStart&&h.push("fc-timeline-slot-em");var v=this.refineHookProps({level:o.rowLevel,dateMarker:d.date,text:d.text,dateEnv:i.dateEnv,viewApi:i.viewApi}),g=this.normalizeClassNames(u.slotLabelClassNames,v);return(0,a.azq)(a.y3w,{hookProps:v,didMount:u.slotLabelDidMount,willUnmount:u.slotLabelWillUnmount},function(m){return(0,a.azq)("th",{ref:m,className:h.concat(g).join(" "),"data-date":s.formatIso(d.date,{omitTime:!f.isTimeScale,omitTimeZoneOffset:!0}),colSpan:d.colspan},(0,a.azq)("div",{className:"fc-timeline-slot-frame",style:{height:o.rowInnerHeight}},(0,a.azq)(Cr,{hookProps:v,isSticky:o.isSticky,navLinkAttrs:e.buildCellNavLinkAttrs(i,d.date,d.rowUnit)})))})},t}(a.H6J);function Er(n,t,e){return e&&"time"!==e?(0,a.rcD)(n,t,e):{}}var Dr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return T(t,n),t.prototype.render=function(){var e=this.props,r=e.dateProfile,o=e.tDateProfile,i=e.rowInnerHeights,s=e.todayRange,u=e.nowDate,d=o.cellRows;return(0,a.azq)(a.HYg,null,d.map(function(c,f){var p=f===d.length-1,v=["fc-timeline-header-row",o.isTimeScale&&p?"fc-timeline-header-row-chrono":""];return(0,a.azq)("tr",{key:f,className:v.join(" ")},c.map(function(g){return(0,a.azq)(_r,{key:g.date.toISOString(),cell:g,rowLevel:f,dateProfile:r,tDateProfile:o,todayRange:s,nowDate:u,rowInnerHeight:i&&i[f],isSticky:!p})}))}))},t}(a.H6J),Pr=function(){function n(t,e,r,o,i,s){this.slatRootEl=t,this.dateProfile=r,this.tDateProfile=o,this.dateEnv=i,this.isRtl=s,this.outerCoordCache=new a.zIV(t,e,!0,!1),this.innerCoordCache=new a.zIV(t,(0,a.sSy)(e,"div"),!0,!1)}return n.prototype.isDateInRange=function(t){return(0,a.mCA)(this.dateProfile.currentRange,t)},n.prototype.dateToCoord=function(t){var e=this.tDateProfile,o=this.computeDateSnapCoverage(t)/e.snapsPerSlot,i=Math.floor(o),s=o-(i=Math.min(i,e.slotCnt-1)),d=this.innerCoordCache,c=this.outerCoordCache;return this.isRtl?c.originClientRect.width-(c.rights[i]-d.getWidth(i)*s):c.lefts[i]+d.getWidth(i)*s},n.prototype.rangeToCoords=function(t){return{start:this.dateToCoord(t.start),end:this.dateToCoord(t.end)}},n.prototype.durationToCoord=function(t){var e=this,r=e.dateProfile,o=e.tDateProfile,i=e.dateEnv,s=e.isRtl,u=0;if(r){var d=i.add(r.activeRange.start,t);o.isTimeScale||(d=(0,a.b7Q)(d)),u=this.dateToCoord(d),!s&&u&&(u+=1)}return u},n.prototype.coordFromLeft=function(t){return this.isRtl?this.outerCoordCache.originClientRect.width-t:t},n.prototype.computeDateSnapCoverage=function(t){return Ie(t,this.tDateProfile,this.dateEnv)},n}();function Ie(n,t,e){var r=e.countDurationsBetween(t.normalizedRange.start,n,t.snapDuration);if(r<0)return 0;if(r>=t.snapDiffToIndex.length)return t.snapCnt;var o=Math.floor(r),i=t.snapDiffToIndex[o];return(0,a.GNL)(i)?i+=r-o:i=Math.ceil(i),i}function Oe(n,t){return null===n?{left:"",right:""}:t?{right:n,left:""}:{left:n,right:""}}function Me(n,t){return n?t?{right:n.start,left:-n.end}:{left:n.start,right:-n.end}:{left:"",right:""}}var xt=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.rootElRef=(0,a.VfA)(),e}return T(t,n),t.prototype.render=function(){var e=this,o=this.props,i=this.context,s=(0,a.NTx)(o.tDateProfile.slotDuration).unit,u=o.slatCoords&&o.slatCoords.dateProfile===o.dateProfile?o.slatCoords:null;return(0,a.azq)(a.wh8,{unit:s},function(d,c){return(0,a.azq)("div",{className:"fc-timeline-header",ref:e.rootElRef},(0,a.azq)("table",{"aria-hidden":!0,className:"fc-scrollgrid-sync-table",style:{minWidth:o.tableMinWidth,width:o.clientWidth}},o.tableColGroupNode,(0,a.azq)("tbody",null,(0,a.azq)(Dr,{dateProfile:o.dateProfile,tDateProfile:o.tDateProfile,nowDate:d,todayRange:c,rowInnerHeights:o.rowInnerHeights}))),i.options.nowIndicator&&(0,a.azq)("div",{className:"fc-timeline-now-indicator-container"},u&&u.isDateInRange(d)&&(0,a.azq)(a.AOy,{isAxis:!0,date:d},function(f,p,h,v){return(0,a.azq)("div",{ref:f,className:["fc-timeline-now-indicator-arrow"].concat(p).join(" "),style:Oe(u.dateToCoord(d),i.isRtl)},v)})))})},t.prototype.componentDidMount=function(){this.updateSize()},t.prototype.componentDidUpdate=function(){this.updateSize()},t.prototype.updateSize=function(){this.props.onMaxCushionWidth&&this.props.onMaxCushionWidth(this.computeMaxCushionWidth())},t.prototype.computeMaxCushionWidth=function(){return Math.max.apply(Math,(0,a.xlG)(this.rootElRef.current,".fc-timeline-header-row:last-child .fc-timeline-slot-cushion").map(function(e){return e.getBoundingClientRect().width}))},t}(a.H6J),kr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return T(t,n),t.prototype.render=function(){var r=this.props,o=this.context,i=o.dateEnv,s=o.options,u=o.theme,d=r.date,c=r.tDateProfile,f=r.isEm,p=(0,a.iCZ)(r.date,r.todayRange,r.nowDate,r.dateProfile),h=["fc-timeline-slot","fc-timeline-slot-lane"],v={"data-date":i.formatIso(d,{omitTimeZoneOffset:!0,omitTime:!c.isTimeScale})},g=M(M({date:i.toDate(r.date)},p),{view:o.viewApi});return f&&h.push("fc-timeline-slot-em"),c.isTimeScale&&h.push((0,a.GNL)(i.countDurationsBetween(c.normalizedRange.start,r.date,c.labelInterval))?"fc-timeline-slot-major":"fc-timeline-slot-minor"),h.push.apply(h,r.isDay?(0,a.yLW)(p,u):(0,a.mK5)(p,u)),(0,a.azq)(a.QJ3,{hookProps:g,classNames:s.slotLaneClassNames,content:s.slotLaneContent,didMount:s.slotLaneDidMount,willUnmount:s.slotLaneWillUnmount,elRef:r.elRef},function(m,b,S,C){return(0,a.azq)("td",M({ref:m,className:h.concat(b).join(" ")},v),(0,a.azq)("div",{ref:S},C))})},t}(a.H6J),Tr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return T(t,n),t.prototype.render=function(){var e=this.props,r=e.tDateProfile,o=e.cellElRefs,i=r.slotDates,s=r.isWeekStarts,u=!r.isTimeScale&&!r.largeUnit;return(0,a.azq)("tbody",null,(0,a.azq)("tr",null,i.map(function(d,c){var f=d.toISOString();return(0,a.azq)(kr,{key:f,elRef:o.createRef(f),date:d,dateProfile:e.dateProfile,tDateProfile:r,nowDate:e.nowDate,todayRange:e.todayRange,isEm:s[c],isDay:u})})))},t}(a.H6J),Rt=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.rootElRef=(0,a.VfA)(),e.cellElRefs=new a.lAU,e.handleScrollRequest=function(r){var o=e.props.onScrollLeftRequest,i=e.coords;if(o&&i){if(r.time)o(i.coordFromLeft(i.durationToCoord(r.time)));return!0}return null},e}return T(t,n),t.prototype.render=function(){var r=this.props,o=this.context;return(0,a.azq)("div",{className:"fc-timeline-slots",ref:this.rootElRef},(0,a.azq)("table",{"aria-hidden":!0,className:o.theme.getClass("table"),style:{minWidth:r.tableMinWidth,width:r.clientWidth}},r.tableColGroupNode,(0,a.azq)(Tr,{cellElRefs:this.cellElRefs,dateProfile:r.dateProfile,tDateProfile:r.tDateProfile,nowDate:r.nowDate,todayRange:r.todayRange})))},t.prototype.componentDidMount=function(){this.updateSizing(),this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)},t.prototype.componentDidUpdate=function(e){this.updateSizing(),this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)},t.prototype.componentWillUnmount=function(){this.scrollResponder.detach(),this.props.onCoords&&this.props.onCoords(null)},t.prototype.updateSizing=function(){var r=this.props,o=this.context;null!==r.clientWidth&&this.scrollResponder&&(this.rootElRef.current.offsetWidth&&(this.coords=new Pr(this.rootElRef.current,function(n,t){return t.map(function(e){var r=e.toISOString();return n[r]})}(this.cellElRefs.currentMap,r.tDateProfile.slotDates),r.dateProfile,r.tDateProfile,o.dateEnv,o.isRtl),r.onCoords&&r.onCoords(this.coords),this.scrollResponder.update(!1)))},t.prototype.positionToHit=function(e){var r=this.coords.outerCoordCache,o=this.context,i=o.dateEnv,s=o.isRtl,u=this.props.tDateProfile,d=r.leftToIndex(e);if(null!=d){var c=r.getWidth(d),f=s?(r.rights[d]-e)/c:(e-r.lefts[d])/c,p=Math.floor(f*u.snapsPerSlot),h=i.add(u.slotDates[d],(0,a.uVS)(u.snapDuration,p));return{dateSpan:{range:{start:h,end:i.add(h,u.snapDuration)},allDay:!this.props.tDateProfile.isTimeScale},dayEl:this.cellElRefs.currentMap[d],left:r.lefts[d],right:r.rights[d]}}return null},t}(a.H6J);function _t(n,t,e){var r=[];if(e)for(var o=0,i=n;o<i.length;o++){var s=i[o],u=e.rangeToCoords(s),d=Math.round(u.start),c=Math.round(u.end);c-d<t&&(c=d+t),r.push({start:d,end:c})}return r}var Et=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return T(t,n),t.prototype.render=function(){var e=this.props,r=[].concat(e.eventResizeSegs,e.dateSelectionSegs);return e.timelineCoords&&(0,a.azq)("div",{className:"fc-timeline-bg"},this.renderSegs(e.businessHourSegs||[],e.timelineCoords,"non-business"),this.renderSegs(e.bgEventSegs||[],e.timelineCoords,"bg-event"),this.renderSegs(r,e.timelineCoords,"highlight"))},t.prototype.renderSegs=function(e,r,o){var i=this.props,s=i.todayRange,u=i.nowDate,d=this.context.isRtl,c=_t(e,0,r),f=e.map(function(p,h){var g=Me(c[h],d);return(0,a.azq)("div",{key:(0,a.rRV)(p.eventRange),className:"fc-timeline-bg-harness",style:g},"bg-event"===o?(0,a.azq)(a.I_K,M({seg:p},(0,a.jHR)(p,s,u))):(0,a.MA3)(o))});return(0,a.azq)(a.HYg,null,f)},t}(a.H6J),Dt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return T(t,n),t.prototype.sliceRange=function(e,r,o,i,s){var u=function(n,t,e){if(!t.isTimeScale&&(n=(0,a.H3H)(n),t.largeUnit)){var r=n;((n={start:e.startOf(n.start,t.largeUnit),end:e.startOf(n.end,t.largeUnit)}).end.valueOf()!==r.end.valueOf()||n.end<=n.start)&&(n={start:n.start,end:e.add(n.end,t.slotDuration)})}return n}(e,i,s),d=[];if(Ie(u.start,i,s)<Ie(u.end,i,s)){var c=(0,a.cMs)(u,i.normalizedRange);c&&d.push({start:c.start,end:c.end,isStart:c.start.valueOf()===u.start.valueOf()&&ge(c.start,i,r,o),isEnd:c.end.valueOf()===u.end.valueOf()&&ge((0,a.hvg)(c.end,-1),i,r,o)})}return d},t}(a.RVT),Mr=(0,a.SPZ)({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"}),Pt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return T(t,n),t.prototype.render=function(){var e=this.props;return(0,a.azq)(a.h2k,M({},e,{extraClassNames:["fc-timeline-event","fc-h-event"],defaultTimeFormat:Mr,defaultDisplayEventTime:!e.isTimeScale}))},t}(a.H6J),zr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.rootElRef=(0,a.VfA)(),e}return T(t,n),t.prototype.render=function(){var e=this,o=this.props,i=this.context,s=o.hiddenSegs,u=o.elRef,d=o.placement,c=o.resourceId,f=d.top,p=d.hcoords,h=p&&null!==f,v=Me(p,i.isRtl),g=c?{resourceId:c}:{};return(0,a.azq)(a.ygx,{allDayDate:null,moreCnt:s.length,allSegs:s,hiddenSegs:s,alignmentElRef:this.rootElRef,dateProfile:o.dateProfile,todayRange:o.todayRange,extraDateSpan:g,popoverContent:function(){return(0,a.azq)(a.HYg,null,s.map(function(m){var b=m.eventRange.instance.instanceId;return(0,a.azq)("div",{key:b,style:{visibility:o.isForcedInvisible[b]?"hidden":""}},(0,a.azq)(Pt,M({isTimeScale:o.isTimeScale,seg:m,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:b===o.eventSelection},(0,a.jHR)(m,o.todayRange,o.nowDate))))}))}},function(m,b,S,C,_,E,R,w){return(0,a.azq)("a",{ref:function(D){(0,a.k$v)(m,D),(0,a.k$v)(u,D),(0,a.k$v)(e.rootElRef,D)},className:["fc-timeline-more-link"].concat(b).join(" "),style:M({visibility:h?"":"hidden",top:f||0},v),onClick:_,title:E,"aria-expanded":R,"aria-controls":w},(0,a.azq)("div",{ref:S,className:"fc-timeline-more-link-inner fc-sticky"},C))})},t}(a.H6J),ze=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.slicer=new Dt,e.sortEventSegs=(0,a.HPs)(a.hak),e.harnessElRefs=new a.lAU,e.moreElRefs=new a.lAU,e.innerElRef=(0,a.VfA)(),e.state={eventInstanceHeights:{},moreLinkHeights:{}},e}return T(t,n),t.prototype.render=function(){var e=this,r=e.props,o=e.state,i=e.context,s=i.options,u=r.dateProfile,d=r.tDateProfile,c=this.slicer.sliceProps(r,u,d.isTimeScale?null:r.nextDayThreshold,i,u,i.dateProfileGenerator,d,i.dateEnv),f=(c.eventDrag?c.eventDrag.segs:null)||(c.eventResize?c.eventResize.segs:null)||[],p=this.sortEventSegs(c.fgEventSegs,s.eventOrder),v=function(n,t,e,r,o,i){for(var s=[],u=[],d=0;d<n.length;d+=1){var c=n[d],p=e[c.eventRange.instance.instanceId],h=t[d];p&&h?s.push({index:d,span:h,thickness:p}):u.push({seg:c,hcoords:h,top:null})}var v=new a.KxW;null!=o&&(v.strictOrder=o),null!=i&&(v.maxStackCnt=i);var g=v.addSegs(s),m=g.map(function(L){return{seg:n[L.index],hcoords:L.span,top:null}}),b=(0,a.AVF)(g),S=[],C=[],_=function(L){return n[L.index]};for(d=0;d<b.length;d+=1){var E=b[d],R=E.entries.map(_);null!=(p=r[(0,a.dS)((0,a.VV4)(R))])?S.push({index:n.length+d,thickness:p,span:E.span}):C.push({seg:R,hcoords:E.span,top:null})}v.maxStackCnt=-1,v.addSegs(S);for(var D=[],k=0,P=0,H=v.toRects();P<H.length;P++){var A=H[P],V=A.index;D.push({seg:V<n.length?n[V]:b[V-n.length].entries.map(_),hcoords:A.span,top:A.levelCoord}),k=Math.max(k,A.levelCoord+A.thickness)}return[D.concat(u,m,C),k]}(p,_t(p,s.eventMinWidth,r.timelineCoords),o.eventInstanceHeights,o.moreLinkHeights,s.eventOrderStrict,s.eventMaxStack),g=v[0],m=v[1],b=(c.eventDrag?c.eventDrag.affectedInstances:null)||(c.eventResize?c.eventResize.affectedInstances:null)||{};return(0,a.azq)(a.HYg,null,(0,a.azq)(Et,{businessHourSegs:c.businessHourSegs,bgEventSegs:c.bgEventSegs,timelineCoords:r.timelineCoords,eventResizeSegs:c.eventResize?c.eventResize.segs:[],dateSelectionSegs:c.dateSelectionSegs,nowDate:r.nowDate,todayRange:r.todayRange}),(0,a.azq)("div",{className:"fc-timeline-events fc-scrollgrid-sync-inner",ref:this.innerElRef,style:{height:m}},this.renderFgSegs(g,b,!1,!1,!1),this.renderFgSegs(function(n,t,e){if(!n.length||!t)return[];var r=function(n){for(var t={},e=0,r=n;e<r.length;e++){var o=r[e],i=o.seg;Array.isArray(i)||(t[i.eventRange.instance.instanceId]=o.top)}return t}(e);return n.map(function(o){return{seg:o,hcoords:t.rangeToCoords(o),top:r[o.eventRange.instance.instanceId]}})}(f,r.timelineCoords,g),{},Boolean(c.eventDrag),Boolean(c.eventResize),!1)))},t.prototype.componentDidMount=function(){this.updateSize()},t.prototype.componentDidUpdate=function(e,r){(e.eventStore!==this.props.eventStore||e.timelineCoords!==this.props.timelineCoords||r.moreLinkHeights!==this.state.moreLinkHeights)&&this.updateSize()},t.prototype.updateSize=function(){var e=this,r=this.props,o=r.timelineCoords;r.onHeightChange&&r.onHeightChange(this.innerElRef.current,!1),o&&this.setState({eventInstanceHeights:(0,a._aR)(this.harnessElRefs.currentMap,function(i){return Math.round(i.getBoundingClientRect().height)}),moreLinkHeights:(0,a._aR)(this.moreElRefs.currentMap,function(i){return Math.round(i.getBoundingClientRect().height)})},function(){r.onHeightChange&&r.onHeightChange(e.innerElRef.current,!0)})},t.prototype.renderFgSegs=function(e,r,o,i,s){var u=this,d=u.harnessElRefs,c=u.moreElRefs,f=u.props,p=u.context,h=o||i||s;return(0,a.azq)(a.HYg,null,e.map(function(v){var g=v.seg,m=v.hcoords,b=v.top;if(Array.isArray(g)){var S=(0,a.dS)((0,a.VV4)(g));return(0,a.azq)(zr,{key:"m:"+S,elRef:c.createRef(S),hiddenSegs:g,placement:v,dateProfile:f.dateProfile,nowDate:f.nowDate,todayRange:f.todayRange,isTimeScale:f.tDateProfile.isTimeScale,eventSelection:f.eventSelection,resourceId:f.resourceId,isForcedInvisible:r})}var C=g.eventRange.instance.instanceId,_=h||Boolean(!r[C]&&m&&null!==b),E=Me(m,p.isRtl);return(0,a.azq)("div",{key:"e:"+C,ref:h?null:d.createRef(C),className:"fc-timeline-event-harness",style:M({visibility:_?"":"hidden",top:b||0},E)},(0,a.azq)(Pt,M({isTimeScale:f.tDateProfile.isTimeScale,seg:g,isDragging:o,isResizing:i,isDateSelecting:s,isSelected:C===f.eventSelection},(0,a.jHR)(g,f.todayRange,f.nowDate))))}))},t}(a.H6J);ze.addStateEquality({eventInstanceHeights:a.S6v,moreLinkHeights:a.S6v});var Nr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.slatsRef=(0,a.VfA)(),e.state={coords:null},e.handeEl=function(r){r?e.context.registerInteractiveComponent(e,{el:r}):e.context.unregisterInteractiveComponent(e)},e.handleCoords=function(r){e.setState({coords:r}),e.props.onSlatCoords&&e.props.onSlatCoords(r)},e}return T(t,n),t.prototype.render=function(){var e=this,r=this,o=r.props,i=r.state,s=r.context,u=s.options,d=o.dateProfile,c=o.tDateProfile,f=(0,a.NTx)(c.slotDuration).unit;return(0,a.azq)("div",{className:"fc-timeline-body",ref:this.handeEl,style:{minWidth:o.tableMinWidth,height:o.clientHeight,width:o.clientWidth}},(0,a.azq)(a.wh8,{unit:f},function(p,h){return(0,a.azq)(a.HYg,null,(0,a.azq)(Rt,{ref:e.slatsRef,dateProfile:d,tDateProfile:c,nowDate:p,todayRange:h,clientWidth:o.clientWidth,tableColGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,onCoords:e.handleCoords,onScrollLeftRequest:o.onScrollLeftRequest}),(0,a.azq)(ze,{dateProfile:d,tDateProfile:o.tDateProfile,nowDate:p,todayRange:h,nextDayThreshold:u.nextDayThreshold,businessHours:o.businessHours,eventStore:o.eventStore,eventUiBases:o.eventUiBases,dateSelection:o.dateSelection,eventSelection:o.eventSelection,eventDrag:o.eventDrag,eventResize:o.eventResize,timelineCoords:i.coords}),u.nowIndicator&&i.coords&&i.coords.isDateInRange(p)&&(0,a.azq)("div",{className:"fc-timeline-now-indicator-container"},(0,a.azq)(a.AOy,{isAxis:!1,date:p},function(v,g,m,b){return(0,a.azq)("div",{ref:v,className:["fc-timeline-now-indicator-line"].concat(g).join(" "),style:Oe(i.coords.dateToCoord(p),s.isRtl)},b)})))}))},t.prototype.queryHit=function(e,r,o,i){var u=this.slatsRef.current.positionToHit(e);return u?{dateProfile:this.props.dateProfile,dateSpan:u.dateSpan,rect:{left:u.left,right:u.right,top:0,bottom:i},dayEl:u.dayEl,layer:0}:null},t}(a.IdW),Wr=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.buildTimelineDateProfile=(0,a.HPs)(bt),e.scrollGridRef=(0,a.VfA)(),e.state={slatCoords:null,slotCushionMaxWidth:null},e.handleSlatCoords=function(r){e.setState({slatCoords:r})},e.handleScrollLeftRequest=function(r){e.scrollGridRef.current.forceScrollLeft(0,r)},e.handleMaxCushionWidth=function(r){e.setState({slotCushionMaxWidth:Math.ceil(r)})},e}return T(t,n),t.prototype.render=function(){var e=this,r=this,o=r.props,i=r.state,s=r.context,u=s.options,d=!o.forPrint&&(0,a.Q8U)(u),c=!o.forPrint&&(0,a.PZw)(u),f=this.buildTimelineDateProfile(o.dateProfile,s.dateEnv,u,s.dateProfileGenerator),p=["fc-timeline",!1===u.eventOverlap?"fc-timeline-overlap-disabled":""],h=u.slotMinWidth,v=kt(f,h||this.computeFallbackSlotMinWidth(f)),g=[{type:"header",key:"header",isSticky:d,chunks:[{key:"timeline",content:function(m){return(0,a.azq)(xt,{dateProfile:o.dateProfile,clientWidth:m.clientWidth,clientHeight:m.clientHeight,tableMinWidth:m.tableMinWidth,tableColGroupNode:m.tableColGroupNode,tDateProfile:f,slatCoords:i.slatCoords,onMaxCushionWidth:h?null:e.handleMaxCushionWidth})}}]},{type:"body",key:"body",liquid:!0,chunks:[{key:"timeline",content:function(m){return(0,a.azq)(Nr,M({},o,{clientWidth:m.clientWidth,clientHeight:m.clientHeight,tableMinWidth:m.tableMinWidth,tableColGroupNode:m.tableColGroupNode,tDateProfile:f,onSlatCoords:e.handleSlatCoords,onScrollLeftRequest:e.handleScrollLeftRequest}))}}]}];return c&&g.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"timeline",content:a.Hbc}]}),(0,a.azq)(a.xS$,{viewSpec:s.viewSpec},function(m,b){return(0,a.azq)("div",{ref:m,className:p.concat(b).join(" ")},(0,a.azq)(pe,{ref:e.scrollGridRef,liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:!1,colGroups:[{cols:v}],sections:g}))})},t.prototype.computeFallbackSlotMinWidth=function(e){return Math.max(30,(this.state.slotCushionMaxWidth||0)/e.slotsPerLabel)},t}(a.IdW);function kt(n,t){return[{span:n.slotCnt,minWidth:t||1}]}const qr=(0,a.rxu)({deps:[ce],initialView:"timelineDay",views:{timeline:{component:Wr,usesMinMaxTime:!0,eventResizableFromStart:!0},timelineDay:{type:"timeline",duration:{days:1}},timelineWeek:{type:"timeline",duration:{weeks:1}},timelineMonth:{type:"timeline",duration:{months:1}},timelineYear:{type:"timeline",duration:{years:1}}}});var He=function(n,t){return(He=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};function $(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}He(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var x=function(){return(x=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;function Y(n,t,e){if(e||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return n.concat(i||Array.prototype.slice.call(t))}Object.create;function Ot(n,t){var e=n.resourceEditable;if(null==e){var r=n.sourceId&&t.getCurrentData().eventSources[n.sourceId];r&&(e=r.extendedProps.resourceEditable),null==e&&(null==(e=t.options.eventResourceEditable)&&(e=t.options.editable))}return e}var Gr=function(){function n(){this.filterResources=(0,a.HPs)(Zr)}return n.prototype.transform=function(t,e){return e.viewSpec.optionDefaults.needsResourceData?{resourceStore:this.filterResources(e.resourceStore,e.options.filterResourcesWithEvents,e.eventStore,e.dateProfile.activeRange),resourceEntityExpansions:e.resourceEntityExpansions}:null},n}();function Zr(n,t,e,r){if(t){var i=function(n,t){var e={};for(var r in n)for(var o=n[r],i=0,s=t[o.defId].resourceIds;i<s.length;i++){e[s[i]]=!0}return e}(function(n,t){return(0,a.CrY)(n,function(e){return(0,a.zvB)(e.range,t)})}(e.instances,r),e.defs);return x(i,function(n,t){var e={};for(var r in n)for(var o=void 0;(o=t[r])&&(r=o.parentId);)e[r]=!0;return e}(i,n)),(0,a.CrY)(n,function(s,u){return i[u]})}return n}var Xr=function(){function n(){this.buildResourceEventUis=(0,a.HPs)(Kr,a.S6v),this.injectResourceEventUis=(0,a.HPs)(eo)}return n.prototype.transform=function(t,e){return e.viewSpec.optionDefaults.needsResourceData?null:{eventUiBases:this.injectResourceEventUis(t.eventUiBases,t.eventStore.defs,this.buildResourceEventUis(e.resourceStore))}},n}();function Kr(n){return(0,a._aR)(n,function(t){return t.ui})}function eo(n,t,e){return(0,a._aR)(n,function(r,o){return o?function(n,t,e){for(var r=[],o=0,i=t.resourceIds;o<i.length;o++){var s=i[o];e[s]&&r.unshift(e[s])}return r.unshift(n),(0,a.kLJ)(r)}(r,t[o],e):r})}var Ae=[];function Ne(n){Ae.push(n)}function Mt(n){return Ae[n]}var ro={id:String,resources:a.yRu,url:String,method:String,startParam:String,endParam:String,timeZoneParam:String,extraParams:a.yRu};function oo(n){var t;if("string"==typeof n?t={url:n}:"function"==typeof n||Array.isArray(n)?t={resources:n}:"object"==typeof n&&n&&(t=n),t){var e=(0,a.rjQ)(t,ro),r=e.refined;!function(n){for(var t in n)console.warn("Unknown resource prop '"+t+"'")}(e.extra);var i=function(n){for(var t=Ae,e=t.length-1;e>=0;e-=1){var o=t[e].parseMeta(n);if(o)return{meta:o,sourceDefId:e}}return null}(r);if(i)return{_raw:n,sourceId:(0,a.M8z)(),sourceDefId:i.sourceDefId,meta:i.meta,publicId:r.id||"",isFetching:!1,latestFetchId:"",fetchRange:null}}return null}function so(n,t,e){var r=e.options,o=e.dateProfile;if(!n||!t)return zt(r.initialResources||r.resources,o.activeRange,r.refetchResourcesOnNavigate,e);switch(t.type){case"RESET_RESOURCE_SOURCE":return zt(t.resourceSourceInput,o.activeRange,r.refetchResourcesOnNavigate,e);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return function(n,t,e,r){return!e||function(n){return Boolean(Mt(n.sourceDefId).ignoreRange)}(n)||n.fetchRange&&(0,a.Dnt)(n.fetchRange,t)?n:We(n,t,r)}(n,o.activeRange,r.refetchResourcesOnNavigate,e);case"RECEIVE_RESOURCES":case"RECEIVE_RESOURCE_ERROR":return function(n,t,e){return t===n.latestFetchId?x(x({},n),{isFetching:!1,fetchRange:e}):n}(n,t.fetchId,t.fetchRange);case"REFETCH_RESOURCES":return We(n,o.activeRange,e);default:return n}}function zt(n,t,e,r){if(n){var o=oo(n);return o=We(o,e?t:null,r)}return null}function We(n,t,e){var r=Mt(n.sourceDefId),o=(0,a.M8z)();return r.fetch({resourceSource:n,range:t,context:e},function(i){e.dispatch({type:"RECEIVE_RESOURCES",fetchId:o,fetchRange:t,rawResources:i.rawResources})},function(i){e.dispatch({type:"RECEIVE_RESOURCE_ERROR",fetchId:o,fetchRange:t,error:i})}),x(x({},n),{isFetching:!0,latestFetchId:o})}var fo={id:String,parentId:String,children:a.yRu,title:String,businessHours:a.yRu,extendedProps:a.yRu,eventEditable:Boolean,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventConstraint:a.yRu,eventOverlap:Boolean,eventAllow:a.yRu,eventClassNames:a.Qu7,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String};function je(n,t,e,r){void 0===t&&(t="");var o=(0,a.rjQ)(n,fo),i=o.refined,s=o.extra,u={id:i.id||"_fc:"+(0,a.M8z)(),parentId:i.parentId||t,title:i.title||"",businessHours:i.businessHours?(0,a.ifz)(i.businessHours,r):null,ui:(0,a.oqz)({editable:i.eventEditable,startEditable:i.eventStartEditable,durationEditable:i.eventDurationEditable,constraint:i.eventConstraint,overlap:i.eventOverlap,allow:i.eventAllow,classNames:i.eventClassNames,backgroundColor:i.eventBackgroundColor,borderColor:i.eventBorderColor,textColor:i.eventTextColor,color:i.eventColor},r),extendedProps:x(x({},s),i.extendedProps)};if(Object.freeze(u.ui.classNames),Object.freeze(u.extendedProps),!e[u.id]&&(e[u.id]=u,i.children))for(var d=0,c=i.children;d<c.length;d++){je(c[d],u.id,e,r)}return u}function At(n){return 0===n.indexOf("_fc:")?"":n}function po(n,t,e,r){if(!n||!t)return{};switch(t.type){case"RECEIVE_RESOURCES":return function(n,t,e,r,o){if(r.latestFetchId===e){for(var i={},s=0,u=t;s<u.length;s++){je(u[s],"",i,o)}return i}return n}(n,t.rawResources,t.fetchId,e,r);case"ADD_RESOURCE":return function(n,t){return x(x({},n),t)}(n,t.resourceHash);case"REMOVE_RESOURCE":return function(n,t){var e=x({},n);for(var r in delete e[t],e)e[r].parentId===t&&(e[r]=x(x({},e[r]),{parentId:""}));return e}(n,t.resourceId);case"SET_RESOURCE_PROP":return function(n,t,e,r){var o,i,s=n[t];return s?x(x({},n),((o={})[t]=x(x({},s),((i={})[e]=r,i)),o)):n}(n,t.resourceId,t.propName,t.propValue);case"SET_RESOURCE_EXTENDED_PROP":return function(n,t,e,r){var o,i,s=n[t];return s?x(x({},n),((o={})[t]=x(x({},s),{extendedProps:x(x({},s.extendedProps),(i={},i[e]=r,i))}),o)):n}(n,t.resourceId,t.propName,t.propValue);default:return n}}var So={resourceId:String,resourceIds:a.yRu,resourceEditable:Boolean};function xo(n){return(n||[]).map(function(t){return String(t)})}var z=function(){function n(t,e){this._context=t,this._resource=e}return n.prototype.setProp=function(t,e){var r=this._resource;this._context.dispatch({type:"SET_RESOURCE_PROP",resourceId:r.id,propName:t,propValue:e}),this.sync(r)},n.prototype.setExtendedProp=function(t,e){var r=this._resource;this._context.dispatch({type:"SET_RESOURCE_EXTENDED_PROP",resourceId:r.id,propName:t,propValue:e}),this.sync(r)},n.prototype.sync=function(t){var e=this._context,r=t.id;this._resource=e.getCurrentData().resourceStore[r],e.emitter.trigger("resourceChange",{oldResource:new n(e,t),resource:this,revert:function(){var o;e.dispatch({type:"ADD_RESOURCE",resourceHash:(o={},o[r]=t,o)})}})},n.prototype.remove=function(){var t=this._context,e=this._resource,r=e.id;t.dispatch({type:"REMOVE_RESOURCE",resourceId:r}),t.emitter.trigger("resourceRemove",{resource:this,revert:function(){var o;t.dispatch({type:"ADD_RESOURCE",resourceHash:(o={},o[r]=e,o)})}})},n.prototype.getParent=function(){var t=this._context,e=this._resource.parentId;return e?new n(t,t.getCurrentData().resourceSource[e]):null},n.prototype.getChildren=function(){var t=this._resource.id,e=this._context,r=e.getCurrentData().resourceStore,o=[];for(var i in r)r[i].parentId===t&&o.push(new n(e,r[i]));return o},n.prototype.getEvents=function(){var t=this._resource.id,e=this._context,r=e.getCurrentData().eventStore,o=r.defs,i=r.instances,s=[];for(var u in i){var d=i[u],c=o[d.defId];-1!==c.resourceIds.indexOf(t)&&s.push(new a.voO(e,c,d))}return s},Object.defineProperty(n.prototype,"id",{get:function(){return At(this._resource.id)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"title",{get:function(){return this._resource.title},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eventConstraint",{get:function(){return this._resource.ui.constraints[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eventOverlap",{get:function(){return this._resource.ui.overlap},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eventAllow",{get:function(){return this._resource.ui.allows[0]||null},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eventBackgroundColor",{get:function(){return this._resource.ui.backgroundColor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eventBorderColor",{get:function(){return this._resource.ui.borderColor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eventTextColor",{get:function(){return this._resource.ui.textColor},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"eventClassNames",{get:function(){return this._resource.ui.classNames},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"extendedProps",{get:function(){return this._resource.extendedProps},enumerable:!1,configurable:!0}),n.prototype.toPlainObject=function(t){void 0===t&&(t={});var e=this._resource,r=e.ui,o=this.id,i={};return o&&(i.id=o),e.title&&(i.title=e.title),t.collapseEventColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?i.eventColor=r.backgroundColor:(r.backgroundColor&&(i.eventBackgroundColor=r.backgroundColor),r.borderColor&&(i.eventBorderColor=r.borderColor)),r.textColor&&(i.eventTextColor=r.textColor),r.classNames.length&&(i.eventClassNames=r.classNames),Object.keys(e.extendedProps).length&&(t.collapseExtendedProps?x(i,e.extendedProps):i.extendedProps=e.extendedProps),i},n.prototype.toJSON=function(){return this.toPlainObject()},n}();a.zeW.prototype.addResource=function(n,t){var e,r=this;void 0===t&&(t=!0);var i,s,o=this.getCurrentData();n instanceof z?((e={})[(s=n._resource).id]=s,i=e):s=je(n,"",i={},o),this.dispatch({type:"ADD_RESOURCE",resourceHash:i}),t&&this.trigger("_scrollRequest",{resourceId:s.id});var u=new z(o,s);return o.emitter.trigger("resourceAdd",{resource:u,revert:function(){r.dispatch({type:"REMOVE_RESOURCE",resourceId:s.id})}}),u},a.zeW.prototype.getResourceById=function(n){n=String(n);var t=this.getCurrentData();if(t.resourceStore){var e=t.resourceStore[n];if(e)return new z(t,e)}return null},a.zeW.prototype.getResources=function(){var n=this.getCurrentData(),t=n.resourceStore,e=[];if(t)for(var r in t)e.push(new z(n,t[r]));return e},a.zeW.prototype.getTopLevelResources=function(){var n=this.getCurrentData(),t=n.resourceStore,e=[];if(t)for(var r in t)t[r].parentId||e.push(new z(n,t[r]));return e},a.zeW.prototype.refetchResources=function(){this.dispatch({type:"REFETCH_RESOURCES"})};var Nt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return $(t,n),t.prototype.getKeyInfo=function(e){return x({"":{}},e.resourceStore)},t.prototype.getKeysForDateSpan=function(e){return[e.resourceId||""]},t.prototype.getKeysForEventDef=function(e){var r=e.resourceIds;return r.length?r:[""]},t}(a.qX1);function ko(n,t){return x(x({},t),{constraints:To(n,t.constraints)})}function To(n,t){return t.map(function(e){var r=e.defs;if(r)for(var o in r){var i=r[o].resourceIds;if(i.length&&-1===i.indexOf(n))return!1}return e})}a.voO.prototype.getResources=function(){var n=this._context.calendarApi;return this._def.resourceIds.map(function(t){return n.getResourceById(t)})},a.voO.prototype.setResources=function(n){for(var t=[],e=0,r=n;e<r.length;e++){var o=r[e],i=null;"string"==typeof o?i=o:"number"==typeof o?i=String(o):o instanceof z?i=o.id:console.warn("unknown resource type: "+o),i&&t.push(i)}this.mutate({standardProps:{resourceIds:t}})};var Oo={resources:function(n,t){t.getCurrentData().resourceSource._raw!==n&&t.dispatch({type:"RESET_RESOURCE_SOURCE",resourceSourceInput:n})}};var zo=(0,a.MCs)("id,title");var Ao={initialResources:a.yRu,resources:a.yRu,eventResourceEditable:Boolean,refetchResourcesOnNavigate:Boolean,resourceOrder:a.MCs,filterResourcesWithEvents:Boolean,resourceGroupField:String,resourceAreaWidth:a.yRu,resourceAreaColumns:a.yRu,resourcesInitiallyExpanded:Boolean,datesAboveResources:Boolean,needsResourceData:Boolean,resourceAreaHeaderClassNames:a.yRu,resourceAreaHeaderContent:a.yRu,resourceAreaHeaderDidMount:a.yRu,resourceAreaHeaderWillUnmount:a.yRu,resourceGroupLabelClassNames:a.yRu,resourceGroupLabelContent:a.yRu,resourceGroupLabelDidMount:a.yRu,resourceGroupLabelWillUnmount:a.yRu,resourceLabelClassNames:a.yRu,resourceLabelContent:a.yRu,resourceLabelDidMount:a.yRu,resourceLabelWillUnmount:a.yRu,resourceLaneClassNames:a.yRu,resourceLaneContent:a.yRu,resourceLaneDidMount:a.yRu,resourceLaneWillUnmount:a.yRu,resourceGroupLaneClassNames:a.yRu,resourceGroupLaneContent:a.yRu,resourceGroupLaneDidMount:a.yRu,resourceGroupLaneWillUnmount:a.yRu},No={resourcesSet:a.yRu,resourceAdd:a.yRu,resourceChange:a.yRu,resourceRemove:a.yRu};function jo(n){return(0,a.azq)(a.Yh$.Consumer,null,function(t){var e=t.options,r={resource:new z(t,n.resource),date:n.date?t.dateEnv.toDate(n.date):null,view:t.viewApi},o={"data-resource-id":n.resource.id,"data-date":n.date?(0,a.SVl)(n.date):void 0};return(0,a.azq)(a.QJ3,{hookProps:r,classNames:e.resourceLabelClassNames,content:e.resourceLabelContent,defaultContent:qo,didMount:e.resourceLabelDidMount,willUnmount:e.resourceLabelWillUnmount},function(i,s,u,d){return n.children(i,s,o,u,d)})})}function qo(n){return n.resource.title||n.resource.id}Ne({ignoreRange:!0,parseMeta:function(n){return Array.isArray(n.resources)?n.resources:null},fetch:function(n,t){t({rawResources:n.resourceSource.meta})}}),Ne({parseMeta:function(n){return"function"==typeof n.resources?n.resources:null},fetch:function(n,t,e){var r=n.context.dateEnv,o=n.resourceSource.meta,i=n.range?{start:r.toDate(n.range.start),end:r.toDate(n.range.end),startStr:r.formatIso(n.range.start),endStr:r.formatIso(n.range.end),timeZone:r.timeZone}:{};(0,a.Olf)(o.bind(null,i),function(s){t({rawResources:s})},e)}}),Ne({parseMeta:function(n){return n.url?{url:n.url,method:(n.method||"GET").toUpperCase(),extraParams:n.extraParams}:null},fetch:function(n,t,e){var r=n.resourceSource.meta,o=function(n,t,e){var i,s,u,d,r=e.dateEnv,o=e.options,c={};return t&&(null==(i=n.startParam)&&(i=o.startParam),null==(s=n.endParam)&&(s=o.endParam),null==(u=n.timeZoneParam)&&(u=o.timeZoneParam),c[i]=r.formatIso(t.start),c[s]=r.formatIso(t.end),"local"!==r.timeZone&&(c[u]=r.timeZone)),d="function"==typeof n.extraParams?n.extraParams():n.extraParams||{},x(c,d),c}(r,n.range,n.context);(0,a.aAC)(r.method,r.url,o,function(i,s){t({rawResources:i,xhr:s})},function(i,s){e({message:i,xhr:s})})}});var qe=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return $(t,n),t.prototype.render=function(){var e=this.props;return(0,a.azq)(jo,{resource:e.resource,date:e.date},function(r,o,i,s,u){return(0,a.azq)("th",x({ref:r,role:"columnheader",className:["fc-col-header-cell","fc-resource"].concat(o).join(" "),colSpan:e.colSpan},i),(0,a.azq)("div",{className:"fc-scrollgrid-sync-inner"},(0,a.azq)("span",{className:["fc-col-header-cell-cushion",e.isSticky?"fc-sticky":""].join(" "),ref:s},u)))})},t}(a.H6J);!function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.buildDateFormat=(0,a.HPs)(Lo),e}$(t,n),t.prototype.render=function(){var e=this,o=this.props,i=this.context,s=this.buildDateFormat(i.options.dayHeaderFormat,o.datesRepDistinctDays,o.dates.length);return(0,a.azq)(a.wh8,{unit:"day"},function(u,d){return 1===o.dates.length?e.renderResourceRow(o.resources,o.dates[0]):i.options.datesAboveResources?e.renderDayAndResourceRows(o.dates,s,d,o.resources):e.renderResourceAndDayRows(o.resources,o.dates,s,d)})},t.prototype.renderResourceRow=function(e,r){var o=e.map(function(i){return(0,a.azq)(qe,{key:i.id,resource:i,colSpan:1,date:r})});return this.buildTr(o,"resources")},t.prototype.renderDayAndResourceRows=function(e,r,o,i){for(var s=[],u=[],d=0,c=e;d<c.length;d++){var f=c[d];s.push(this.renderDateCell(f,r,o,i.length,null,!0));for(var p=0,h=i;p<h.length;p++){var v=h[p];u.push((0,a.azq)(qe,{key:v.id+":"+f.toISOString(),resource:v,colSpan:1,date:f}))}}return(0,a.azq)(a.HYg,null,this.buildTr(s,"day"),this.buildTr(u,"resources"))},t.prototype.renderResourceAndDayRows=function(e,r,o,i){for(var s=[],u=[],d=0,c=e;d<c.length;d++){var f=c[d];s.push((0,a.azq)(qe,{key:f.id,resource:f,colSpan:r.length,isSticky:!0}));for(var p=0,h=r;p<h.length;p++){var v=h[p];u.push(this.renderDateCell(v,o,i,1,f))}}return(0,a.azq)(a.HYg,null,this.buildTr(s,"resources"),this.buildTr(u,"day"))},t.prototype.renderDateCell=function(e,r,o,i,s,u){var d=this.props,c=s?":"+s.id:"",f=s?{resource:new z(this.context,s)}:{},p=s?{"data-resource-id":s.id}:{};return d.datesRepDistinctDays?(0,a.azq)(a.nWf,{key:e.toISOString()+c,date:e,dateProfile:d.dateProfile,todayRange:o,colCnt:d.dates.length*d.resources.length,dayHeaderFormat:r,colSpan:i,isSticky:u,extraHookProps:f,extraDataAttrs:p}):(0,a.azq)(a.Ceh,{key:e.getUTCDay()+c,dow:e.getUTCDay(),dayHeaderFormat:r,colSpan:i,isSticky:u,extraHookProps:f,extraDataAttrs:p})},t.prototype.buildTr=function(e,r){var o=this.props.renderIntro;return e.length||(e=[(0,a.azq)("td",{key:0},"\xa0")]),(0,a.azq)("tr",{key:r,role:"row"},o&&o(r),e)}}(a.H6J);function Lo(n,t,e){return n||(0,a.nm6)(t,e)}var Uo=function(t){for(var e={},r=[],o=0;o<t.length;o+=1){var i=t[o].id;r.push(i),e[i]=o}this.ids=r,this.indicesById=e,this.length=t.length},Wt=function(){function n(t,e,r){this.dayTableModel=t,this.resources=e,this.context=r,this.resourceIndex=new Uo(e),this.rowCnt=t.rowCnt,this.colCnt=t.colCnt*e.length,this.cells=this.buildCells()}return n.prototype.buildCells=function(){for(var t=this,e=t.rowCnt,r=t.dayTableModel,o=t.resources,i=[],s=0;s<e;s+=1){for(var u=[],d=0;d<r.colCnt;d+=1)for(var c=0;c<o.length;c+=1){var f=o[c],p={resource:new z(this.context,f)},h={"data-resource-id":f.id},g={resourceId:f.id},m=r.cells[s][d].date;u[this.computeCol(d,c)]={key:f.id+":"+m.toISOString(),date:m,extraHookProps:p,extraDataAttrs:h,extraClassNames:["fc-resource"],extraDateSpan:g}}i.push(u)}return i},n}(),jt=(function(n){function t(){return null!==n&&n.apply(this,arguments)||this}$(t,n),t.prototype.computeCol=function(e,r){return r*this.dayTableModel.colCnt+e},t.prototype.computeColRanges=function(e,r,o){return[{firstCol:this.computeCol(e,o),lastCol:this.computeCol(r,o),isStart:!0,isEnd:!0}]}}(Wt),function(n){function t(){return null!==n&&n.apply(this,arguments)||this}$(t,n),t.prototype.computeCol=function(e,r){return e*this.resources.length+r},t.prototype.computeColRanges=function(e,r,o){for(var i=[],s=e;s<=r;s+=1){var u=this.computeCol(s,o);i.push({firstCol:u,lastCol:u,isStart:s===e,isEnd:s===r})}return i}}(Wt),[]);(function(){function n(){this.joinDateSelection=(0,a.HPs)(this.joinSegs),this.joinBusinessHours=(0,a.HPs)(this.joinSegs),this.joinFgEvents=(0,a.HPs)(this.joinSegs),this.joinBgEvents=(0,a.HPs)(this.joinSegs),this.joinEventDrags=(0,a.HPs)(this.joinInteractions),this.joinEventResizes=(0,a.HPs)(this.joinInteractions)}n.prototype.joinProps=function(t,e){for(var r=[],o=[],i=[],s=[],u=[],d=[],c="",p=0,h=e.resourceIndex.ids.concat([""]);p<h.length;p++){var v=h[p],g=t[v];r.push(g.dateSelectionSegs),o.push(v?g.businessHourSegs:jt),i.push(v?g.fgEventSegs:jt),s.push(g.bgEventSegs),u.push(g.eventDrag),d.push(g.eventResize),c=c||g.eventSelection}return{dateSelectionSegs:this.joinDateSelection.apply(this,Y([e],r)),businessHourSegs:this.joinBusinessHours.apply(this,Y([e],o)),fgEventSegs:this.joinFgEvents.apply(this,Y([e],i)),bgEventSegs:this.joinBgEvents.apply(this,Y([e],s)),eventDrag:this.joinEventDrags.apply(this,Y([e],u)),eventResize:this.joinEventResizes.apply(this,Y([e],d)),eventSelection:c}},n.prototype.joinSegs=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var o=t.resources.length,i=[],s=0;s<o;s+=1){for(var u=0,d=e[s];u<d.length;u++){var c=d[u];i.push.apply(i,this.transformSeg(c,t,s))}for(var f=0,p=e[o];f<p.length;f++){c=p[f];i.push.apply(i,this.transformSeg(c,t,s))}}return i},n.prototype.expandSegs=function(t,e){for(var r=t.resources.length,o=[],i=0;i<r;i+=1)for(var s=0,u=e;s<u.length;s++){var d=u[s];o.push.apply(o,this.transformSeg(d,t,i))}return o},n.prototype.joinInteractions=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var o=t.resources.length,i={},s=[],u=!1,d=!1,c=0;c<o;c+=1){var f=e[c];if(f){u=!0;for(var p=0,h=f.segs;p<h.length;p++){var v=h[p];s.push.apply(s,this.transformSeg(v,t,c))}x(i,f.affectedInstances),d=d||f.isEvent}if(e[o])for(var g=0,m=e[o].segs;g<m.length;g++){v=m[g];s.push.apply(s,this.transformSeg(v,t,c))}}return u?{affectedInstances:i,segs:s,isEvent:d}:null}})(),function(n){function t(){return null!==n&&n.apply(this,arguments)||this}$(t,n),t.prototype.getKeyInfo=function(e){var r=e.resourceDayTableModel,o=(0,a._aR)(r.resourceIndex.indicesById,function(i){return r.resources[i]});return o[""]={},o},t.prototype.getKeysForDateSpan=function(e){return[e.resourceId||""]},t.prototype.getKeysForEventDef=function(e){var r=e.resourceIds;return r.length?r:[""]}}(a.qX1);function qt(n,t,e,r,o,i){var s=function(n,t,e,r){var o=function(n,t){var e={};for(var r in n){var o=n[r];e[r]={resource:o,resourceFields:Bt(o),children:[]}}for(var r in n){if((o=n[r]).parentId){var i=e[o.parentId];i&&Ut(e[r],i.children,t)}}return e}(n,r),i=[];for(var s in o){var u=o[s];u.resource.parentId||Lt(u,i,e,0,t,r)}return i}(n,r?-1:1,t,e),u=[];return ye(s,u,r,[],0,o,i),u}function ye(n,t,e,r,o,i,s){for(var u=0;u<n.length;u+=1){var d=n[u],c=d.group;if(c)if(e){var f=t.length,p=r.length;if(ye(d.children,t,e,r.concat(0),o,i,s),f<t.length){var h=t[f];(h.rowSpans=h.rowSpans.slice())[p]=t.length-f}}else{var m=null!=i[g=c.spec.field+":"+c.value]?i[g]:s;t.push({id:g,group:c,isExpanded:m}),m&&ye(d.children,t,e,r,o+1,i,s)}else if(d.resource){var g;m=null!=i[g=d.resource.id]?i[g]:s;t.push({id:g,rowSpans:r,depth:o,isExpanded:m,hasChildren:Boolean(d.children.length),resource:d.resource,resourceFields:d.resourceFields}),m&&ye(d.children,t,e,r,o+1,i,s)}}}function Lt(n,t,e,r,o,i){e.length&&(-1===o||r<=o)?Lt(n,function(n,t,e){var o,i,r=n.resourceFields[e.field];if(e.order)for(i=0;i<t.length;i+=1){if((s=t[i]).group){var u=(0,a.dx1)(r,s.group.value)*e.order;if(0===u){o=s;break}if(u<0)break}}else for(i=0;i<t.length;i+=1){var s;if((s=t[i]).group&&r===s.group.value){o=s;break}}return o||(o={group:{value:r,spec:e},children:[]},t.splice(i,0,o)),o}(n,t,e[0]).children,e.slice(1),r+1,o,i):Ut(n,t,i)}function Ut(n,t,e){var r;for(r=0;r<t.length;r+=1){if((0,a.oMu)(t[r].resourceFields,n.resourceFields,e)>0)break}t.splice(r,0,n)}function Bt(n){var t=x(x(x({},n.extendedProps),n.ui),n);return delete t.ui,delete t.extendedProps,t}const $o=(0,a.rxu)({deps:[ce],reducers:[function(n,t,e){var r=so(n&&n.resourceSource,t,e);return{resourceSource:r,resourceStore:po(n&&n.resourceStore,t,r,e),resourceEntityExpansions:function(n,t){var e;if(!n||!t)return{};switch(t.type){case"SET_RESOURCE_ENTITY_EXPANDED":return x(x({},n),((e={})[t.id]=t.isExpanded,e));default:return n}}(n&&n.resourceEntityExpansions,t)}}],isLoadingFuncs:[function(n){return n.resourceSource&&n.resourceSource.isFetching}],eventRefiners:So,eventDefMemberAdders:[function(n){return{resourceIds:xo(n.resourceIds).concat(n.resourceId?[n.resourceId]:[]),resourceEditable:n.resourceEditable}}],isDraggableTransformers:[function(n,t,e,r){if(!n){var o=r.getCurrentData();if(o.viewSpecs[o.currentViewType].optionDefaults.needsResourceData&&Ot(t,r))return!0}return n}],eventDragMutationMassagers:[function(n,t,e){var r=t.dateSpan.resourceId,o=e.dateSpan.resourceId;r&&o&&r!==o&&(n.resourceMutation={matchResourceId:r,setResourceId:o})}],eventDefMutationAppliers:[function(n,t,e){var r=t.resourceMutation;if(r&&Ot(n,e)){var o=n.resourceIds.indexOf(r.matchResourceId);if(-1!==o){var i=n.resourceIds.slice();i.splice(o,1),-1===i.indexOf(r.setResourceId)&&i.push(r.setResourceId),n.resourceIds=i}}}],dateSelectionTransformers:[function(n,t){var e=n.dateSpan.resourceId,r=t.dateSpan.resourceId;return e&&r?{resourceId:e}:null}],datePointTransforms:[function(n,t){return n.resourceId?{resource:t.calendarApi.getResourceById(n.resourceId)}:{}}],dateSpanTransforms:[function(n,t){return n.resourceId?{resource:t.calendarApi.getResourceById(n.resourceId)}:{}}],viewPropsTransformers:[Gr,Xr],isPropsValid:function(n,t){var r=(new Nt).splitProps(x(x({},n),{resourceStore:t.getCurrentData().resourceStore}));for(var o in r){var i=r[o];if(o&&r[""]&&(i=x(x({},i),{eventStore:(0,a.rOY)(r[""].eventStore,i.eventStore),eventUiBases:x(x({},r[""].eventUiBases),i.eventUiBases)})),!(0,a.yw$)(i,t,{resourceId:o},ko.bind(null,o)))return!1}return!0},externalDefTransforms:[function(n){return n.resourceId?{resourceId:n.resourceId}:{}}],eventDropTransformers:[function(n,t){var e=n.resourceMutation;if(e){var r=t.calendarApi;return{oldResource:r.getResourceById(e.matchResourceId),newResource:r.getResourceById(e.setResourceId)}}return{oldResource:null,newResource:null}}],optionChangeHandlers:Oo,optionRefiners:Ao,listenerRefiners:No,propSetHandlers:{resourceStore:function(n,t){var e=t.emitter;e.hasHandlers("resourcesSet")&&e.trigger("resourcesSet",function(n,t){var e=[];for(var r in n)e.push(new z(t,n[r]));return e}(n,t))}}});var Le=function(n,t){return(Le=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};function I(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}Le(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var K=function(){return(K=Object.assign||function(t){for(var e,r=1,o=arguments.length;r<o;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;function Gt(n){for(var t=n.depth,e=n.hasChildren,r=n.isExpanded,o=n.onExpanderClick,i=[],s=0;s<t;s+=1)i.push((0,a.azq)("span",{className:"fc-icon"}));var u=["fc-icon"];return e&&(r?u.push("fc-icon-minus-square"):u.push("fc-icon-plus-square")),i.push((0,a.azq)("span",{className:"fc-datagrid-expander"+(e?"":" fc-datagrid-expander-placeholder"),onClick:o},(0,a.azq)("span",{className:u.join(" ")}))),a.azq.apply(void 0,function(n,t,e){if(e||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return n.concat(i||Array.prototype.slice.call(t))}([a.HYg,{}],i))}function Xo(n){return{resource:new z(n.context,n.resource),fieldValue:n.fieldValue,view:n.context.viewApi}}var Ko=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return I(t,n),t.prototype.render=function(){var e=this.props;return(0,a.azq)(a.rVp,{hookProps:e.hookProps,content:e.colSpec.cellContent,defaultContent:ei},function(r,o){return(0,a.azq)("span",{className:"fc-datagrid-cell-main",ref:r},o)})},t}(a.H6J);function ei(n){return n.fieldValue||(0,a.azq)(a.HYg,null,"\xa0")}var ti=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.refineHookProps=(0,a.Vbb)(Xo),e.normalizeClassNames=(0,a.HgS)(),e.onExpanderClick=function(r){var o=e.props;o.hasChildren&&e.context.dispatch({type:"SET_RESOURCE_ENTITY_EXPANDED",id:o.resource.id,isExpanded:!o.isExpanded})},e}return I(t,n),t.prototype.render=function(){var e=this,o=this.props,i=this.context,s=o.colSpec,u=this.refineHookProps({resource:o.resource,fieldValue:o.fieldValue,context:i}),d=this.normalizeClassNames(s.cellClassNames,u);return(0,a.azq)(a.y3w,{hookProps:u,didMount:s.cellDidMount,willUnmount:s.cellWillUnmount},function(c){return(0,a.azq)("td",{ref:c,role:"gridcell","data-resource-id":o.resource.id,className:["fc-datagrid-cell","fc-resource"].concat(d).join(" ")},(0,a.azq)("div",{className:"fc-datagrid-cell-frame",style:{height:o.innerHeight}},(0,a.azq)("div",{className:"fc-datagrid-cell-cushion fc-scrollgrid-sync-inner"},s.isMain&&(0,a.azq)(Gt,{depth:o.depth,hasChildren:o.hasChildren,isExpanded:o.isExpanded,onExpanderClick:e.onExpanderClick}),(0,a.azq)(Ko,{hookProps:u,colSpec:s}))))})},t}(a.H6J),ni=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return I(t,n),t.prototype.render=function(){var r=this.props,o=this.context,i=r.colSpec,s={groupValue:r.fieldValue,view:o.viewApi};return(0,a.azq)(a.QJ3,{hookProps:s,classNames:i.cellClassNames,content:i.cellContent,defaultContent:ri,didMount:i.cellDidMount,willUnmount:i.cellWillUnmount},function(u,d,c,f){return(0,a.azq)("td",{ref:u,role:"gridcell",rowSpan:r.rowSpan,className:["fc-datagrid-cell","fc-resource-group"].concat(d).join(" ")},(0,a.azq)("div",{className:"fc-datagrid-cell-frame fc-datagrid-cell-frame-liquid"},(0,a.azq)("div",{className:"fc-datagrid-cell-cushion fc-sticky",ref:c},f)))})},t}(a.H6J);function ri(n){return n.groupValue||(0,a.azq)(a.HYg,null,"\xa0")}var Zt=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return I(t,n),t.prototype.render=function(){var e=this.props,r=e.resource,o=e.rowSpans,i=e.depth,s=Bt(r);return(0,a.azq)("tr",{role:"row"},e.colSpecs.map(function(u,d){var c=o[d];if(0===c)return null;null==c&&(c=1);var f=u.field?s[u.field]:r.title||At(r.id);return c>1?(0,a.azq)(ni,{key:d,colSpec:u,fieldValue:f,rowSpan:c}):(0,a.azq)(ti,{key:d,colSpec:u,resource:r,fieldValue:f,depth:i,hasChildren:e.hasChildren,isExpanded:e.isExpanded,innerHeight:e.innerHeight})}))},t}(a.H6J);Zt.addPropsEquality({rowSpans:a.CnA});var $t=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.innerInnerRef=(0,a.VfA)(),e.onExpanderClick=function(){var r=e.props;e.context.dispatch({type:"SET_RESOURCE_ENTITY_EXPANDED",id:r.id,isExpanded:!r.isExpanded})},e}return I(t,n),t.prototype.render=function(){var e=this,o=this.props,i=this.context,s={groupValue:o.group.value,view:i.viewApi},u=o.group.spec;return(0,a.azq)("tr",{role:"row"},(0,a.azq)(a.QJ3,{hookProps:s,classNames:u.labelClassNames,content:u.labelContent,defaultContent:oi,didMount:u.labelDidMount,willUnmount:u.labelWillUnmount},function(d,c,f,p){return(0,a.azq)("th",{ref:d,role:"columnheader",scope:"colgroup",colSpan:o.spreadsheetColCnt,className:["fc-datagrid-cell","fc-resource-group",i.theme.getClass("tableCellShaded")].concat(c).join(" ")},(0,a.azq)("div",{className:"fc-datagrid-cell-frame",style:{height:o.innerHeight}},(0,a.azq)("div",{className:"fc-datagrid-cell-cushion fc-scrollgrid-sync-inner",ref:e.innerInnerRef},(0,a.azq)(Gt,{depth:0,hasChildren:!0,isExpanded:o.isExpanded,onExpanderClick:e.onExpanderClick}),(0,a.azq)("span",{className:"fc-datagrid-cell-main",ref:f},p))))}))},t}(a.H6J);function oi(n){return n.groupValue||(0,a.azq)(a.HYg,null,"\xa0")}$t.addPropsEquality({group:function(n,t){return n.spec===t.spec&&n.value===t.value}});var ai=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.resizerElRefs=new a.lAU(e._handleColResizerEl.bind(e)),e.colDraggings={},e}return I(t,n),t.prototype.render=function(){var e=this,r=this.props,o=r.colSpecs,i=r.superHeaderRendering,s=r.rowInnerHeights,u={view:this.context.viewApi},d=[];if(s=s.slice(),i){var c=s.shift();d.push((0,a.azq)("tr",{key:"row-super",role:"row"},(0,a.azq)(a.QJ3,{hookProps:u,classNames:i.headerClassNames,content:i.headerContent,didMount:i.headerDidMount,willUnmount:i.headerWillUnmount},function(p,h,v,g){return(0,a.azq)("th",{ref:p,role:"columnheader",scope:"colgroup",colSpan:o.length,className:["fc-datagrid-cell","fc-datagrid-cell-super"].concat(h).join(" ")},(0,a.azq)("div",{className:"fc-datagrid-cell-frame",style:{height:c}},(0,a.azq)("div",{className:"fc-datagrid-cell-cushion fc-scrollgrid-sync-inner",ref:v},g)))})))}var f=s.shift();return d.push((0,a.azq)("tr",{key:"row",role:"row"},o.map(function(p,h){var v=h===o.length-1;return(0,a.azq)(a.QJ3,{key:h,hookProps:u,classNames:p.headerClassNames,content:p.headerContent,didMount:p.headerDidMount,willUnmount:p.headerWillUnmount},function(g,m,b,S){return(0,a.azq)("th",{ref:g,role:"columnheader",className:["fc-datagrid-cell"].concat(m).join(" ")},(0,a.azq)("div",{className:"fc-datagrid-cell-frame",style:{height:f}},(0,a.azq)("div",{className:"fc-datagrid-cell-cushion fc-scrollgrid-sync-inner"},p.isMain&&(0,a.azq)("span",{className:"fc-datagrid-expander fc-datagrid-expander-placeholder"},(0,a.azq)("span",{className:"fc-icon"})),(0,a.azq)("span",{className:"fc-datagrid-cell-main",ref:b},S)),!v&&(0,a.azq)("div",{className:"fc-datagrid-cell-resizer",ref:e.resizerElRefs.createRef(h)})))})}))),(0,a.azq)(a.HYg,null,d)},t.prototype._handleColResizerEl=function(e,r){var i,o=this.colDraggings;e?(i=this.initColResizing(e,parseInt(r,10)))&&(o[r]=i):(i=o[r])&&(i.destroy(),delete o[r])},t.prototype.initColResizing=function(e,r){var o=this.context,i=o.pluginHooks,s=o.isRtl,u=this.props.onColWidthChange,d=i.elementDraggingImpl;if(d){var f,p,c=new d(e);return c.emitter.on("dragstart",function(){var h=(0,a.xlG)((0,a.x_n)(e,"tr"),"th");p=h.map(function(v){return v.getBoundingClientRect().width}),f=p[r]}),c.emitter.on("dragmove",function(h){p[r]=Math.max(f+h.deltaX*(s?-1:1),20),u&&u(p.slice())}),c.setAutoScrollEnabled(!1),c}return null},t}(a.H6J),si=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return I(t,n),t.prototype.render=function(){var r=this.props,o=this.context,i={resource:new z(o,r.resource)};return(0,a.azq)(a.rVp,{hookProps:i,content:o.options.resourceLaneContent},function(s,u){return u&&(0,a.azq)("div",{className:"fc-timeline-lane-misc",ref:s},u)})},t}(a.H6J),li=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.refineHookProps=(0,a.Vbb)(ci),e.normalizeClassNames=(0,a.HgS)(),e.handleHeightChange=function(r,o){e.props.onHeightChange&&e.props.onHeightChange((0,a.x_n)(r,"tr"),o)},e}return I(t,n),t.prototype.render=function(){var e=this,o=this.props,i=this.context,s=i.options,u=this.refineHookProps({resource:o.resource,context:i}),d=this.normalizeClassNames(s.resourceLaneClassNames,u);return(0,a.azq)("tr",{ref:o.elRef},(0,a.azq)(a.y3w,{hookProps:u,didMount:s.resourceLaneDidMount,willUnmount:s.resourceLaneWillUnmount},function(c){return(0,a.azq)("td",{ref:c,className:["fc-timeline-lane","fc-resource"].concat(d).join(" "),"data-resource-id":o.resource.id},(0,a.azq)("div",{className:"fc-timeline-lane-frame",style:{height:o.innerHeight}},(0,a.azq)(si,{resource:o.resource}),(0,a.azq)(ze,{dateProfile:o.dateProfile,tDateProfile:o.tDateProfile,nowDate:o.nowDate,todayRange:o.todayRange,nextDayThreshold:o.nextDayThreshold,businessHours:o.businessHours,eventStore:o.eventStore,eventUiBases:o.eventUiBases,dateSelection:o.dateSelection,eventSelection:o.eventSelection,eventDrag:o.eventDrag,eventResize:o.eventResize,timelineCoords:o.timelineCoords,onHeightChange:e.handleHeightChange,resourceId:o.resource.id})))}))},t}(a.H6J);function ci(n){return{resource:new z(n.context,n.resource)}}var ui=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return I(t,n),t.prototype.render=function(){var e=this,r=this.props,o=this.props.renderingHooks,i={groupValue:r.groupValue,view:this.context.viewApi};return(0,a.azq)("tr",{ref:r.elRef},(0,a.azq)(a.QJ3,{hookProps:i,classNames:o.laneClassNames,content:o.laneContent,didMount:o.laneDidMount,willUnmount:o.laneWillUnmount},function(s,u,d,c){return(0,a.azq)("td",{ref:s,className:["fc-timeline-lane","fc-resource-group",e.context.theme.getClass("tableCellShaded")].concat(u).join(" ")},(0,a.azq)("div",{style:{height:r.innerHeight},ref:d},c))}))},t}(a.H6J),di=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return I(t,n),t.prototype.render=function(){var r=this.props,o=this.context,i=r.rowElRefs,s=r.innerHeights;return(0,a.azq)("tbody",null,r.rowNodes.map(function(u,d){if(u.group)return(0,a.azq)(ui,{key:u.id,elRef:i.createRef(u.id),groupValue:u.group.value,renderingHooks:u.group.spec,innerHeight:s[d]||""});if(u.resource){var c=u.resource;return(0,a.azq)(li,K({key:u.id,elRef:i.createRef(u.id)},r.splitProps[c.id],{resource:c,dateProfile:r.dateProfile,tDateProfile:r.tDateProfile,nowDate:r.nowDate,todayRange:r.todayRange,nextDayThreshold:o.options.nextDayThreshold,businessHours:c.businessHours||r.fallbackBusinessHours,innerHeight:s[d]||"",timelineCoords:r.slatCoords,onHeightChange:r.onRowHeightChange}))}return null}))},t}(a.H6J),fi=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.rootElRef=(0,a.VfA)(),e.rowElRefs=new a.lAU,e}return I(t,n),t.prototype.render=function(){var r=this.props,o=this.context;return(0,a.azq)("table",{ref:this.rootElRef,"aria-hidden":!0,className:"fc-scrollgrid-sync-table "+o.theme.getClass("table"),style:{minWidth:r.tableMinWidth,width:r.clientWidth,height:r.minHeight}},(0,a.azq)(di,{rowElRefs:this.rowElRefs,rowNodes:r.rowNodes,dateProfile:r.dateProfile,tDateProfile:r.tDateProfile,nowDate:r.nowDate,todayRange:r.todayRange,splitProps:r.splitProps,fallbackBusinessHours:r.fallbackBusinessHours,slatCoords:r.slatCoords,innerHeights:r.innerHeights,onRowHeightChange:r.onRowHeightChange}))},t.prototype.componentDidMount=function(){this.updateCoords()},t.prototype.componentDidUpdate=function(){this.updateCoords()},t.prototype.componentWillUnmount=function(){this.props.onRowCoords&&this.props.onRowCoords(null)},t.prototype.updateCoords=function(){var e=this.props;e.onRowCoords&&null!==e.clientWidth&&this.props.onRowCoords(new a.zIV(this.rootElRef.current,function(n,t){return t.map(function(e){return n[e.id]})}(this.rowElRefs.currentMap,e.rowNodes),!1,!0))},t}(a.H6J);var hi=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.computeHasResourceBusinessHours=(0,a.HPs)(vi),e.resourceSplitter=new Nt,e.bgSlicer=new Dt,e.slatsRef=(0,a.VfA)(),e.state={slatCoords:null},e.handleEl=function(r){r?e.context.registerInteractiveComponent(e,{el:r}):e.context.unregisterInteractiveComponent(e)},e.handleSlatCoords=function(r){e.setState({slatCoords:r}),e.props.onSlatCoords&&e.props.onSlatCoords(r)},e.handleRowCoords=function(r){e.rowCoords=r,e.props.onRowCoords&&e.props.onRowCoords(r)},e}return I(t,n),t.prototype.render=function(){var e=this,r=this,o=r.props,i=r.state,s=r.context,u=o.dateProfile,d=o.tDateProfile,c=(0,a.NTx)(d.slotDuration).unit,f=this.computeHasResourceBusinessHours(o.rowNodes),p=this.resourceSplitter.splitProps(o),h=p[""],v=this.bgSlicer.sliceProps(h,u,d.isTimeScale?null:o.nextDayThreshold,s,u,s.dateProfileGenerator,d,s.dateEnv),g=i.slatCoords&&i.slatCoords.dateProfile===o.dateProfile?i.slatCoords:null;return(0,a.azq)("div",{ref:this.handleEl,className:["fc-timeline-body",o.expandRows?"fc-timeline-body-expandrows":""].join(" "),style:{minWidth:o.tableMinWidth}},(0,a.azq)(a.wh8,{unit:c},function(m,b){return(0,a.azq)(a.HYg,null,(0,a.azq)(Rt,{ref:e.slatsRef,dateProfile:u,tDateProfile:d,nowDate:m,todayRange:b,clientWidth:o.clientWidth,tableColGroupNode:o.tableColGroupNode,tableMinWidth:o.tableMinWidth,onCoords:e.handleSlatCoords,onScrollLeftRequest:o.onScrollLeftRequest}),(0,a.azq)(Et,{businessHourSegs:f?null:v.businessHourSegs,bgEventSegs:v.bgEventSegs,timelineCoords:g,eventResizeSegs:v.eventResize?v.eventResize.segs:[],dateSelectionSegs:v.dateSelectionSegs,nowDate:m,todayRange:b}),(0,a.azq)(fi,{rowNodes:o.rowNodes,dateProfile:u,tDateProfile:o.tDateProfile,nowDate:m,todayRange:b,splitProps:p,fallbackBusinessHours:f?o.businessHours:null,clientWidth:o.clientWidth,minHeight:o.expandRows?o.clientHeight:"",tableMinWidth:o.tableMinWidth,innerHeights:o.rowInnerHeights,slatCoords:g,onRowCoords:e.handleRowCoords,onRowHeightChange:o.onRowHeightChange}),s.options.nowIndicator&&g&&g.isDateInRange(m)&&(0,a.azq)("div",{className:"fc-timeline-now-indicator-container"},(0,a.azq)(a.AOy,{isAxis:!1,date:m},function(S,C,_,E){return(0,a.azq)("div",{ref:S,className:["fc-timeline-now-indicator-line"].concat(C).join(" "),style:Oe(g.dateToCoord(m),s.isRtl)},E)})))}))},t.prototype.queryHit=function(e,r){var o=this.rowCoords,i=o.topToIndex(r);if(null!=i){var s=this.props.rowNodes[i].resource;if(s){var u=this.slatsRef.current.positionToHit(e);if(u)return{dateProfile:this.props.dateProfile,dateSpan:{range:u.dateSpan.range,allDay:u.dateSpan.allDay,resourceId:s.id},rect:{left:u.left,right:u.right,top:o.tops[i],bottom:o.bottoms[i]},dayEl:u.dayEl,layer:0}}}return null},t}(a.IdW);function vi(n){for(var t=0,e=n;t<e.length;t++){var o=e[t].resource;if(o&&o.businessHours)return!0}return!1}var gi=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.scrollGridRef=(0,a.VfA)(),e.timeBodyScrollerElRef=(0,a.VfA)(),e.spreadsheetHeaderChunkElRef=(0,a.VfA)(),e.rootElRef=(0,a.VfA)(),e.ensureScrollGridResizeId=0,e.state={resourceAreaWidthOverride:null},e.ensureScrollGridResize=function(){e.ensureScrollGridResizeId&&clearTimeout(e.ensureScrollGridResizeId),e.ensureScrollGridResizeId=setTimeout(function(){e.scrollGridRef.current.handleSizing(!1)},a.vc.SCROLLGRID_RESIZE_INTERVAL+1)},e}return I(t,n),t.prototype.render=function(){var e=this,r=e.props,o=e.state,i=e.context,s=i.options,u=!r.forPrint&&(0,a.Q8U)(s),d=!r.forPrint&&(0,a.PZw)(s),c=[{type:"header",key:"header",syncRowHeights:!0,isSticky:u,chunks:[{key:"datagrid",elRef:this.spreadsheetHeaderChunkElRef,tableClassName:"fc-datagrid-header",rowContent:r.spreadsheetHeaderRows},{key:"divider",outerContent:(0,a.azq)("td",{role:"presentation",className:"fc-resource-timeline-divider "+i.theme.getClass("tableCellShaded")})},{key:"timeline",content:r.timeHeaderContent}]},{type:"body",key:"body",syncRowHeights:!0,liquid:!0,expandRows:Boolean(s.expandRows),chunks:[{key:"datagrid",tableClassName:"fc-datagrid-body",rowContent:r.spreadsheetBodyRows},{key:"divider",outerContent:(0,a.azq)("td",{role:"presentation",className:"fc-resource-timeline-divider "+i.theme.getClass("tableCellShaded")})},{key:"timeline",scrollerElRef:this.timeBodyScrollerElRef,content:r.timeBodyContent}]}];d&&c.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"datagrid",content:a.Hbc},{key:"divider",outerContent:(0,a.azq)("td",{role:"presentation",className:"fc-resource-timeline-divider "+i.theme.getClass("tableCellShaded")})},{key:"timeline",content:a.Hbc}]});var f=null!=o.resourceAreaWidthOverride?o.resourceAreaWidthOverride:s.resourceAreaWidth;return(0,a.azq)(pe,{ref:this.scrollGridRef,elRef:this.rootElRef,liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:!1,colGroups:[{cols:r.spreadsheetCols,width:f},{cols:[]},{cols:r.timeCols}],sections:c})},t.prototype.forceTimeScroll=function(e){this.scrollGridRef.current.forceScrollLeft(2,e)},t.prototype.forceResourceScroll=function(e){this.scrollGridRef.current.forceScrollTop(1,e)},t.prototype.getResourceScroll=function(){return this.timeBodyScrollerElRef.current.scrollTop},t.prototype.componentDidMount=function(){this.initSpreadsheetResizing()},t.prototype.componentWillUnmount=function(){this.destroySpreadsheetResizing()},t.prototype.initSpreadsheetResizing=function(){var e=this,r=this.context,o=r.isRtl,s=r.pluginHooks.elementDraggingImpl,u=this.spreadsheetHeaderChunkElRef.current;if(s){var f,p,d=this.rootElRef.current,c=this.spreadsheetResizerDragging=new s(d,".fc-resource-timeline-divider");c.emitter.on("dragstart",function(){f=u.getBoundingClientRect().width,p=d.getBoundingClientRect().width}),c.emitter.on("dragmove",function(h){var v=f+h.deltaX*(o?-1:1);v=Math.max(v,30),v=Math.min(v,p-30),e.setState({resourceAreaWidthOverride:v},e.ensureScrollGridResize)}),c.setAutoScrollEnabled(!1)}},t.prototype.destroySpreadsheetResizing=function(){this.spreadsheetResizerDragging&&this.spreadsheetResizerDragging.destroy()},t}(a.H6J),Jt=function(n){function t(e,r){var o=n.call(this,e,r)||this;return o.processColOptions=(0,a.HPs)(wi),o.buildTimelineDateProfile=(0,a.HPs)(bt),o.hasNesting=(0,a.HPs)(bi),o.buildRowNodes=(0,a.HPs)(qt),o.layoutRef=(0,a.VfA)(),o.rowNodes=[],o.renderedRowNodes=[],o.buildRowIndex=(0,a.HPs)(mi),o.handleSlatCoords=function(i){o.setState({slatCoords:i})},o.handleRowCoords=function(i){o.rowCoords=i,o.scrollResponder.update(!1)},o.handleMaxCushionWidth=function(i){o.setState({slotCushionMaxWidth:Math.ceil(i)})},o.handleScrollLeftRequest=function(i){o.layoutRef.current.forceTimeScroll(i)},o.handleScrollRequest=function(i){var s=o.rowCoords,u=o.layoutRef.current,d=i.rowId||i.resourceId;if(s){if(d){var f=o.buildRowIndex(o.renderedRowNodes)[d];if(null!=f){var p=null!=i.fromBottom?s.bottoms[f]-i.fromBottom:s.tops[f];u.forceResourceScroll(p)}}return!0}return null},o.handleColWidthChange=function(i){o.setState({spreadsheetColWidths:i})},o.state={resourceAreaWidth:r.options.resourceAreaWidth,spreadsheetColWidths:[]},o}return I(t,n),t.prototype.render=function(){var e=this,r=this,o=r.props,i=r.state,s=r.context,u=s.options,d=s.viewSpec,c=this.processColOptions(s.options),f=c.superHeaderRendering,p=c.groupSpecs,h=c.orderSpecs,v=c.isVGrouping,g=c.colSpecs,m=this.buildTimelineDateProfile(o.dateProfile,s.dateEnv,u,s.dateProfileGenerator),b=this.rowNodes=this.buildRowNodes(o.resourceStore,p,h,v,o.resourceEntityExpansions,u.resourcesInitiallyExpanded),S=["fc-resource-timeline",this.hasNesting(b)?"":"fc-resource-timeline-flat","fc-timeline",!1===u.eventOverlap?"fc-timeline-overlap-disabled":"fc-timeline-overlap-enabled"],C=u.slotMinWidth,_=kt(m,C||this.computeFallbackSlotMinWidth(m));return(0,a.azq)(a.xS$,{viewSpec:d},function(E,R){return(0,a.azq)("div",{ref:E,className:S.concat(R).join(" ")},(0,a.azq)(gi,{ref:e.layoutRef,forPrint:o.forPrint,isHeightAuto:o.isHeightAuto,spreadsheetCols:yi(g,i.spreadsheetColWidths,""),spreadsheetHeaderRows:function(w){return(0,a.azq)(ai,{superHeaderRendering:f,colSpecs:g,onColWidthChange:e.handleColWidthChange,rowInnerHeights:w.rowSyncHeights})},spreadsheetBodyRows:function(w){return(0,a.azq)(a.HYg,null,e.renderSpreadsheetRows(b,g,w.rowSyncHeights))},timeCols:_,timeHeaderContent:function(w){return(0,a.azq)(xt,{clientWidth:w.clientWidth,clientHeight:w.clientHeight,tableMinWidth:w.tableMinWidth,tableColGroupNode:w.tableColGroupNode,dateProfile:o.dateProfile,tDateProfile:m,slatCoords:i.slatCoords,rowInnerHeights:w.rowSyncHeights,onMaxCushionWidth:C?null:e.handleMaxCushionWidth})},timeBodyContent:function(w){return(0,a.azq)(hi,{dateProfile:o.dateProfile,clientWidth:w.clientWidth,clientHeight:w.clientHeight,tableMinWidth:w.tableMinWidth,tableColGroupNode:w.tableColGroupNode,expandRows:w.expandRows,tDateProfile:m,rowNodes:b,businessHours:o.businessHours,dateSelection:o.dateSelection,eventStore:o.eventStore,eventUiBases:o.eventUiBases,eventSelection:o.eventSelection,eventDrag:o.eventDrag,eventResize:o.eventResize,resourceStore:o.resourceStore,nextDayThreshold:s.options.nextDayThreshold,rowInnerHeights:w.rowSyncHeights,onSlatCoords:e.handleSlatCoords,onRowCoords:e.handleRowCoords,onScrollLeftRequest:e.handleScrollLeftRequest,onRowHeightChange:w.reportRowHeightChange})}}))})},t.prototype.renderSpreadsheetRows=function(e,r,o){return e.map(function(i,s){return i.group?(0,a.azq)($t,{key:i.id,id:i.id,spreadsheetColCnt:r.length,isExpanded:i.isExpanded,group:i.group,innerHeight:o[s]||""}):i.resource?(0,a.azq)(Zt,{key:i.id,colSpecs:r,rowSpans:i.rowSpans,depth:i.depth,isExpanded:i.isExpanded,hasChildren:i.hasChildren,resource:i.resource,innerHeight:o[s]||""}):null})},t.prototype.componentDidMount=function(){this.renderedRowNodes=this.rowNodes,this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)},t.prototype.getSnapshotBeforeUpdate=function(){return this.props.forPrint?{}:{resourceScroll:this.queryResourceScroll()}},t.prototype.componentDidUpdate=function(e,r,o){this.renderedRowNodes=this.rowNodes,this.scrollResponder.update(e.dateProfile!==this.props.dateProfile),o.resourceScroll&&this.handleScrollRequest(o.resourceScroll)},t.prototype.componentWillUnmount=function(){this.scrollResponder.detach()},t.prototype.computeFallbackSlotMinWidth=function(e){return Math.max(30,(this.state.slotCushionMaxWidth||0)/e.slotsPerLabel)},t.prototype.queryResourceScroll=function(){var r=this.rowCoords,o=this.renderedRowNodes;if(r){for(var i=this.layoutRef.current,s=r.bottoms,u=i.getResourceScroll(),d={},c=0;c<s.length;c+=1){var f=o[c],p=s[c]-u;if(p>0){d.rowId=f.id,d.fromBottom=p;break}}return d}return null},t}(a.H6J);function mi(n){for(var t={},e=0;e<n.length;e+=1)t[n[e].id]=e;return t}function yi(n,t,e){return void 0===e&&(e=""),n.map(function(r,o){return{className:r.isMain?"fc-main-col":"",width:t[o]||r.width||e}})}function bi(n){for(var t=0,e=n;t<e.length;t++){var r=e[t];if(r.group||r.resource&&r.hasChildren)return!0}return!1}function wi(n){var t=n.resourceAreaColumns||[],e=null;t.length?n.resourceAreaHeaderContent&&(e={headerClassNames:n.resourceAreaHeaderClassNames,headerContent:n.resourceAreaHeaderContent,headerDidMount:n.resourceAreaHeaderDidMount,headerWillUnmount:n.resourceAreaHeaderWillUnmount}):t.push({headerClassNames:n.resourceAreaHeaderClassNames,headerContent:n.resourceAreaHeaderContent||"Resources",headerDidMount:n.resourceAreaHeaderDidMount,headerWillUnmount:n.resourceAreaHeaderWillUnmount});for(var r=[],o=[],i=[],s=!1,u=0,d=t;u<d.length;u++){var c=d[u];c.group?o.push(K(K({},c),{cellClassNames:c.cellClassNames||n.resourceGroupLabelClassNames,cellContent:c.cellContent||n.resourceGroupLabelContent,cellDidMount:c.cellDidMount||n.resourceGroupLabelDidMount,cellWillUnmount:c.cellWillUnmount||n.resourceGroupLaneWillUnmount})):r.push(c)}var f=r[0];if(f.isMain=!0,f.cellClassNames=f.cellClassNames||n.resourceLabelClassNames,f.cellContent=f.cellContent||n.resourceLabelContent,f.cellDidMount=f.cellDidMount||n.resourceLabelDidMount,f.cellWillUnmount=f.cellWillUnmount||n.resourceLabelWillUnmount,o.length)i=o,s=!0;else{var p=n.resourceGroupField;p&&i.push({field:p,labelClassNames:n.resourceGroupLabelClassNames,labelContent:n.resourceGroupLabelContent,labelDidMount:n.resourceGroupLabelDidMount,labelWillUnmount:n.resourceGroupLabelWillUnmount,laneClassNames:n.resourceGroupLaneClassNames,laneContent:n.resourceGroupLaneContent,laneDidMount:n.resourceGroupLaneDidMount,laneWillUnmount:n.resourceGroupLaneWillUnmount})}for(var v=[],g=0,m=n.resourceOrder||zo;g<m.length;g++){for(var b=m[g],S=!1,C=0,_=i;C<_.length;C++){var E=_[C];if(E.field===b.field){E.order=b.order,S=!0;break}}S||v.push(b)}return{superHeaderRendering:e,isVGrouping:s,groupSpecs:i,colSpecs:o.concat(r),orderSpecs:v}}Jt.addStateEquality({spreadsheetColWidths:a.CnA});const Ci=(0,a.rxu)({deps:[ce,$o,qr],initialView:"resourceTimelineDay",views:{resourceTimeline:{type:"timeline",component:Jt,needsResourceData:!0,resourceAreaWidth:"30%",resourcesInitiallyExpanded:!0,eventResizableFromStart:!0},resourceTimelineDay:{type:"resourceTimeline",duration:{days:1}},resourceTimelineWeek:{type:"resourceTimeline",duration:{weeks:1}},resourceTimelineMonth:{type:"resourceTimeline",duration:{months:1}},resourceTimelineYear:{type:"resourceTimeline",duration:{years:1}}}});var xi=y(12877),J=y(3352);class F{constructor(t){this.viewContainerRef=t,this.activeViews=new Map,this.detachedViews=[]}getView(t,e,r){let o=this.activeViews.get(e);return o?((0,J.qu)("Returning active view %O",e),o.detectChanges(),o):((0,J.qu)("CREATING new view %O",e),o=this.viewContainerRef.createEmbeddedView(t,r),this.activeViews.set(e,o),o.detectChanges(),o)}ngOnDestroy(){this.destroyAll()}destroyAll(){(0,J.qu)("Destroying all views"),Array.from(this.activeViews.values()).forEach(this.destroyView.bind(this)),(0,J.qu)("Destroying %O active views",this.activeViews.size),this.activeViews.clear(),this.destroyDetached()}destroyDetached(){for((0,J.qu)("Destroying %O detached views",this.detachedViews.length);this.detachedViews.length;)this.destroyView(this.detachedViews.pop())}markForDestruction(t){const e=this.activeViews.get(t);!e||((0,J.qu)("Marking view %O to be destroyed",t),this.activeViews.delete(t),this.detachedViews.push(e))}destroyView(t){const e=this.viewContainerRef.indexOf(t);-1!==e&&this.viewContainerRef.remove(e),t.destroy()}}F.\u0275fac=function(t){return new(t||F)(l.LFG(l.s_b))},F.\u0275prov=l.Yz7({token:F,factory:F.\u0275fac});var Ue=y(74647),Qt=y(43440),Be=y(65146),Xt=y(70482),Ri=y(32042),Kt=y(26942),_i=y(12703),en=y(67727),Fe=y(20979),Ei=y(84109),tn=y(97656);const we=[{id:"skeleton-resource-1",title:"",href:"skeleton-resource-1"},{id:"skeleton-resource-2",title:"",href:"skeleton-resource-2"},{id:"skeleton-resource-3",title:"",href:"skeleton-resource-3"}],Ve={editable:!1,eventStartEditable:!1,eventDurationEditable:!1,allDay:!0,backgroundColor:"#FFFFFF",borderColor:"#FFFFFF",title:""},Di=[Object.assign(Object.assign({},Ve),{id:"skeleton-1",resourceId:we[0].id,start:moment().subtract(1,"days").toDate(),end:moment().add(1,"day").toDate(),viewBox:"0 0 800 80"}),Object.assign(Object.assign({},Ve),{id:"skeleton-2",resourceId:we[1].id,start:moment().subtract(3,"days").toDate(),end:moment().toDate(),viewBox:"0 0 1200 80"}),Object.assign(Object.assign({},Ve),{id:"skeleton-3",resourceId:we[2].id,start:moment().toDate(),end:moment().add(3,"days").toDate(),viewBox:"0 0 1200 80"})];var Pi=y(92054),ki=y(36293),Ti=y(86469),nn=y(47775),Ii=y(2775),rn=y(81134),Oi=y(18293),Mi=y(62964),zi=y(55977),Hi=y(87912),on=y(1707),an=y(37409),Ge=y(70099);const sn=["container"];function Ai(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"wp-single-card",8),l.NdJ("stateLinkClicked",function(o){return l.CHM(e),l.oxw(3).openStateLink(o)})("cardClicked",function(o){return l.CHM(e),l.oxw(3).calendar.onCardClicked(o)}),l.qZA(),l.BQk()}if(2&n){const e=t.$implicit,r=l.oxw(3);l.xp6(1),l.Q6J("workPackage",e)("selectedWhenOpen",!0)("showInfoButton",!0)("disabledInfo",r.showDisabledText(e)),l.uIk("data-drag-helper-id",e.id)("data-qa-selector","op-add-existing-pane--wp-"+e.id)}}function Ni(n,t){if(1&n&&(l.ynx(0),l.TgZ(1,"div",5,6),l.YNc(3,Ai,2,6,"ng-container",7),l.ALo(4,"async"),l.qZA(),l.BQk()),2&n){const e=l.oxw(2);l.xp6(3),l.Q6J("ngForOf",l.lcZ(4,1,e.currentWorkPackages$))}}function Wi(n,t){if(1&n&&l._UZ(0,"img",12),2&n){const e=l.oxw(3);l.Q6J("src",e.image.empty_state,l.LSH)}}function ji(n,t){if(1&n&&(l.TgZ(0,"div",9),l.YNc(1,Wi,1,1,"img",10),l.ALo(2,"async"),l._UZ(3,"span",11),l.ALo(4,"async"),l.qZA()),2&n){const e=l.oxw(2);let r,o;l.xp6(1),l.Q6J("ngIf",null==(r=l.lcZ(2,2,e.noResultsFound$))?null:r.showImage),l.xp6(2),l.Q6J("innerHTML",null==(o=l.lcZ(4,4,e.noResultsFound$))?null:o.text,l.oJD)}}function qi(n,t){if(1&n&&(l.ynx(0),l.YNc(1,Ni,5,3,"ng-container",2),l.ALo(2,"async"),l.YNc(3,ji,5,6,"ng-template",null,4,l.W1O),l.BQk()),2&n){const e=l.MAs(4),r=l.oxw();l.xp6(1),l.Q6J("ngIf",!1===l.lcZ(2,2,r.isEmpty$))("ngIfElse",e)}}function Li(n,t){1&n&&(l.TgZ(0,"op-content-loader",13),l.O4$(),l._UZ(1,"rect",14),l._UZ(2,"rect",15),l._UZ(3,"rect",16),l.qZA())}class ee extends Kt.N{constructor(t,e,r,o,i,s,u,d,c,f,p){super(),this.querySpace=t,this.I18n=e,this.apiV3Service=r,this.notificationService=o,this.currentProject=i,this.urlParamsHelper=s,this.calendar=u,this.calendarDrag=d,this.$state=c,this.actions$=f,this.wpFilters=p,this.className=!0,this.searchString$=new q.X(""),this.isEmpty$=new q.X(!0),this.isLoading$=new q.X(!1),this.noResultsFound$=this.isEmpty$.pipe((0,O.U)(h=>0===this.searchString$.getValue().length?{showImage:!0,text:this.text.empty_state}:h?{showImage:!1,text:this.text.no_results}:{})),this.currentWorkPackages$=(0,G.aj)([this.calendarDrag.draggableWorkPackages$,this.querySpace.results.values$()]).pipe((0,O.U)(([h,v])=>{const g=v.elements.map(m=>m.id);return h.filter(m=>!g.includes(m.id))})),this.workPackageRemoved$=this.actions$.ofType(Xe).pipe((0,_e.O)(null)),this.text={empty_state:this.I18n.t("js.team_planner.quick_add.empty_state"),placeholder:this.I18n.t("js.team_planner.quick_add.search_placeholder"),no_results:this.I18n.t("js.autocompleter.notFoundText")},this.image={empty_state:(0,tn.h)("team-planner/add-existing-pane--empty-state.gif")}}set dragContainer(t){void 0!==t&&(this.calendarDrag.destroyDrake(),this.calendarDrag.registerDrag(t,".op-add-existing-pane--wp"))}ngOnInit(){(0,G.aj)([this.searchString$.pipe((0,rt.x)(),(0,X.b)(500)),this.wpFilters.updates$().pipe((0,_e.O)(null)),this.workPackageRemoved$]).pipe(this.untilDestroyed(),(0,O.U)(([t])=>t),(0,tt.w)(t=>this.searchWorkPackages(t))).subscribe(t=>{this.calendarDrag.draggableWorkPackages$.next(t),this.isEmpty$.next(0===t.length),this.isLoading$.next(!1)})}ngOnDestroy(){super.ngOnDestroy(),this.calendarDrag.destroyDrake()}searchWorkPackages(t){if(this.isLoading$.next(!0),0===t.length)return this.isLoading$.next(!1),this.isEmpty$.next(!0),(0,rn.of)([]);const e=this.wpFilters.currentlyVisibleFilters,r=this.urlParamsHelper.filterBuilderFrom(e);return r.add("typeahead","**",[t]),this.addExistingFilters(r),this.apiV3Service.withOptionalProject(this.currentProject.id).work_packages.filtered(r,{pageSize:"-1"}).get().pipe((0,O.U)(o=>o.elements),(0,Oi.K)(o=>(this.notificationService.handleRawError(o),(0,rn.of)([]))),this.untilDestroyed())}clearInput(){this.searchString$.next("")}get isSearching(){return""!==this.searchString$.value}showDisabledText(t){return{text:this.calendarDrag.workPackageDisabledExplanation(t),orientation:"left"}}openStateLink(t){this.$state.go(`${(0,Xt.W)(this.$state)}.tabs`,{workPackageId:t.workPackageId,tabIdentifier:"overview"})}addExistingFilters(t){const e=this.querySpace.query.value;(null==e?void 0:e.filters)&&this.urlParamsHelper.buildV3GetFilters(e.filters).forEach(o=>{Object.keys(o).forEach(i=>{"assignee"!==i&&"datesInterval"!==i&&t.add(i,o[i].operator,o[i].values)})})}}ee.\u0275fac=function(t){return new(t||ee)(l.Y36(Qt.q),l.Y36(ae.D),l.Y36(Fe.T),l.Y36(Mi.q),l.Y36(Be.R),l.Y36(zi.Z),l.Y36(se.j),l.Y36(U),l.Y36(nn.StateService),l.Y36(xe.b),l.Y36(Ue.Z))},ee.\u0275cmp=l.Xpm({type:ee,selectors:[["op-add-existing-pane"]],viewQuery:function(t,e){if(1&t&&(l.Gf(sn,5),l.Gf(sn,5)),2&t){let r;l.iGM(r=l.CRH())&&(e.container=r.first),l.iGM(r=l.CRH())&&(e.dragContainer=r.first)}},hostVars:2,hostBindings:function(t,e){2&t&&l.ekj("op-add-existing-pane",e.className)},features:[l.qOj],decls:7,vars:8,consts:[["data-qa-selector","op-add-existing-pane--search-input",3,"ngModel","placeholder","ngModelChange"],["slot","before",1,"spot-icon","spot-icon_search"],[4,"ngIf","ngIfElse"],["loadingTemplate",""],["emptyTemplate",""],[1,"op-add-existing-pane--results"],["container",""],[4,"ngFor","ngForOf"],[1,"op-add-existing-pane--wp",3,"workPackage","selectedWhenOpen","showInfoButton","disabledInfo","stateLinkClicked","cardClicked"],["data-qa-selector","op-add-existing-pane--empty-state",1,"op-add-existing-pane--empty-state"],["class","op-add-existing-pane--empty-state-image",3,"src",4,"ngIf"],[1,"op-add-existing-pane--empty-state-text",3,"innerHTML"],[1,"op-add-existing-pane--empty-state-image",3,"src"],["viewBox","0 0 200 44",1,"op-add-existing-pane--loading"],["x","0","y","0","width","50%","height","12","rx","1"],["x","0","y","16","width","100%","height","12","rx","1"],["x","0","y","32","width","100%","height","12","rx","1"]],template:function(t,e){if(1&t&&(l.TgZ(0,"spot-text-field",0),l.NdJ("ngModelChange",function(o){return e.searchString$.next(o)}),l.ALo(1,"async"),l._UZ(2,"span",1),l.qZA(),l.YNc(3,qi,5,4,"ng-container",2),l.ALo(4,"async"),l.YNc(5,Li,4,0,"ng-template",null,3,l.W1O)),2&t){const r=l.MAs(6);l.Q6J("ngModel",l.lcZ(1,4,e.searchString$))("placeholder",e.text.placeholder),l.xp6(3),l.Q6J("ngIf",!1===l.lcZ(4,6,e.isLoading$))("ngIfElse",r)}},directives:[Hi.A,on.JJ,on.On,W.O5,W.sg,an.P,Ge.V],pipes:[W.Ov],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px #0000001a;z-index:10000!important}[_nghost-%COMP%]{display:grid;grid-template-rows:32px 1fr;grid-row-gap:10px;background:#F3F3F3;padding:8px}.op-add-existing-pane--results[_ngcontent-%COMP%]{overflow:auto;scrollbar-color:transparent transparent;scrollbar-width:thin}.op-add-existing-pane--results[_ngcontent-%COMP%]::-webkit-scrollbar{height:10px;width:10px}.op-add-existing-pane--results[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.op-add-existing-pane--results[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#DDDDDD;visibility:hidden}.op-add-existing-pane--results[_ngcontent-%COMP%]:hover{scrollbar-color:#DDDDDD transparent}.op-add-existing-pane--results[_ngcontent-%COMP%]:hover::-webkit-scrollbar-thumb{visibility:visible}.op-add-existing-pane--empty-state[_ngcontent-%COMP%]{display:grid;grid-template-rows:auto 1fr}.op-add-existing-pane--empty-state-image[_ngcontent-%COMP%]{width:160px;margin:0 auto}.op-add-existing-pane--empty-state-text[_ngcontent-%COMP%]{margin:0 24px;text-align:center;line-height:1.25}.op-add-existing-pane--loading[_ngcontent-%COMP%]{height:85px;padding:8px 16px;background:white;border-radius:5px}"],changeDetection:0});var Ui=y(3742);class te{}te.\u0275fac=function(t){return new(t||te)},te.\u0275cmp=l.Xpm({type:te,selectors:[["op-principal-loading-skeleton"]],decls:4,vars:0,consts:[[1,"op-principal-loading-skeleton"],["viewBox","0 0 180 80"],["height","30%","rx","4","ry","4","width","117","x","75","y","30"],["cx","35","cy","42","r","35"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"op-content-loader",1),l.O4$(),l._UZ(2,"rect",2),l._UZ(3,"circle",3),l.qZA(),l.qZA())},directives:[Ge.V],styles:[".op-principal-loading-skeleton[_ngcontent-%COMP%]{width:100%;position:relative;background:var(--body-background);font-size:var(--card-font-size);overflow:hidden;height:80px}"],changeDetection:0});var Bi=y(91923),Fi=y(70233),Vi=y(26269),Gi=y(91593);class ne{constructor(t,e,r,o,i,s,u,d,c){this.elementRef=t,this.halResourceService=e,this.I18n=r,this.halNotification=o,this.pathHelper=i,this.apiV3Service=s,this.injector=u,this.currentProjectService=d,this.wpTableFilters=c,this.selectAssignee=new l.vpe,this.alreadySelected=[],this.getOptionsFn=f=>this.autocomplete(f)}autocomplete(t){const e=new Vi.qM,r=this.currentProjectService.id;return e.add("member","=",[r]),t&&e.add("typeahead","**",[t]),this.apiV3Service.principals.filtered(e).get().pipe((0,O.U)(o=>o.elements.filter(i=>!this.alreadySelected.find(s=>s===i.id))))}selectUser(t){this.selectAssignee.emit(t)}}ne.\u0275fac=function(t){return new(t||ne)(l.Y36(l.SBq),l.Y36(Bi.u),l.Y36(ae.D),l.Y36(en.W),l.Y36(Fi.j),l.Y36(Fe.T),l.Y36(l.zs3),l.Y36(Be.R),l.Y36(Ue.Z))},ne.\u0275cmp=l.Xpm({type:ne,selectors:[["op-tp-add-assignee"]],inputs:{alreadySelected:"alreadySelected"},outputs:{selectAssignee:"selectAssignee"},decls:1,vars:2,consts:[["data-qa-selector","tp-add-assignee","resource","user","appendTo","body",3,"fetchDataDirectly","getOptionsFn","change"]],template:function(t,e){1&t&&(l.TgZ(0,"op-autocompleter",0),l.NdJ("change",function(o){return e.selectUser(o)}),l.qZA()),2&t&&l.Q6J("fetchDataDirectly",!0)("getOptionsFn",e.getOptionsFn)},directives:[Gi.s],encapsulation:2,changeDetection:0});class re{constructor(){this.viewBox="0 0 800 80"}}re.\u0275fac=function(t){return new(t||re)},re.\u0275cmp=l.Xpm({type:re,selectors:[["op-wp-loading-skeleton"]],inputs:{viewBox:"viewBox"},decls:4,vars:1,consts:[[1,"op-wp-loading-skeleton"],[3,"viewBox"],["x","0","y","0","rx","3","ry","3","width","20%","height","35%"],["x","0","y","40%","rx","3","ry","3","width","100%","height","35%"]],template:function(t,e){1&t&&(l.TgZ(0,"div",0),l.TgZ(1,"op-content-loader",1),l.O4$(),l._UZ(2,"rect",2),l._UZ(3,"rect",3),l.qZA(),l.qZA()),2&t&&(l.xp6(1),l.Q6J("viewBox",e.viewBox))},directives:[Ge.V],styles:['.op-wp-loading-skeleton[_ngcontent-%COMP%]{width:calc(100% - 2px);border:1px solid var(--widget-box-block-border-color);border-radius:2px;padding:10px;position:relative;box-shadow:1px 1px 3px #d3d3d3;background:var(--body-background);font-size:var(--card-font-size);overflow:hidden;height:80px}.op-wp-loading-skeleton[_ngcontent-%COMP%]:after{width:12px;height:100px;background:white;content:"";display:block;position:absolute;right:0;top:0}'],changeDetection:0});const Zi=["ucCalendar"],$i=["eventContent"],Yi=["resourceContent"],Ji=["assigneeAutocompleter"],Qi=["removeDropzone"],Xi=["addExistingToggle"];function Ki(n,t){1&n&&l._UZ(0,"op-add-existing-pane",12)}const ea=function(n){return{"-active":n}};function ta(n,t){if(1&n){const e=l.EpF();l.ynx(0),l.TgZ(1,"button",7,8),l.NdJ("click",function(){return l.CHM(e),l.oxw().toggleAddExistingPane()}),l.ALo(3,"async"),l._UZ(4,"op-icon",9),l._UZ(5,"span",10),l.qZA(),l.YNc(6,Ki,1,0,"op-add-existing-pane",11),l.ALo(7,"async"),l.BQk()}if(2&n){const e=l.oxw();l.xp6(1),l.Q6J("ngClass",l.VKq(7,ea,l.lcZ(3,3,e.showAddExistingPane))),l.xp6(4),l.Q6J("textContent",e.text.add_existing),l.xp6(1),l.Q6J("ngIf",l.lcZ(7,5,e.showAddExistingPane))}}const na=function(n){return{"op-team-planner--calendar_empty":n}};function ra(n,t){if(1&n&&(l._UZ(0,"full-calendar",16,17),l.ALo(2,"async")),2&n){const e=l.oxw().ngIf,r=l.oxw();l.Q6J("options",e)("ngClass",l.VKq(4,na,l.lcZ(2,2,r.isEmpty$)))}}function oa(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",18),l._UZ(1,"img",19),l._UZ(2,"span",20),l.TgZ(3,"button",21),l.NdJ("click",function(){return l.CHM(e),l.oxw(2).showAssigneeAddRow()}),l.qZA(),l.qZA()}if(2&n){const e=l.oxw(2);l.xp6(1),l.Q6J("src",e.image.empty_state,l.LSH),l.xp6(1),l.Q6J("textContent",e.text.noData),l.xp6(1),l.Q6J("textContent",e.text.add_assignee)}}function ia(n,t){if(1&n&&(l.ynx(0),l.YNc(1,ra,3,6,"full-calendar",13),l._UZ(2,"div",14),l.YNc(3,oa,4,3,"div",15),l.ALo(4,"async"),l.BQk()),2&n){const e=t.ngIf,r=l.oxw();l.xp6(1),l.Q6J("ngIf",e),l.xp6(1),l.Q6J("textContent",r.calendar.tooManyResultsText),l.xp6(1),l.Q6J("ngIf",l.lcZ(4,3,r.isEmpty$))}}function aa(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",24),l._UZ(1,"op-principal",25),l.TgZ(2,"button",26),l.NdJ("click",function(){l.CHM(e);const o=l.oxw().resource;return l.oxw().removeAssignee(o.id)}),l._UZ(3,"op-icon",27),l.qZA(),l.qZA()}if(2&n){const e=l.oxw().resource,r=l.oxw();l.xp6(1),l.Q6J("principal",e.extendedProps.principal),l.xp6(1),l.uIk("aria-label",r.text.remove_assignee)("data-qa-remove-assignee",e.extendedProps.principal.id)}}function sa(n,t){1&n&&l._UZ(0,"op-principal-loading-skeleton")}function la(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"op-tp-add-assignee",28),l.NdJ("selectAssignee",function(o){return l.CHM(e),l.oxw(2).addAssignee(o)}),l.ALo(1,"async"),l.qZA()}if(2&n){const e=l.oxw(2);l.Q6J("alreadySelected",l.lcZ(1,1,e.principalIds$))}}function ca(n,t){if(1&n&&(l.YNc(0,aa,4,3,"div",22),l.YNc(1,sa,1,0,"op-principal-loading-skeleton",1),l.YNc(2,la,2,3,"op-tp-add-assignee",23)),2&n){const e=t.resource;l.Q6J("ngIf",e&&e.extendedProps.principal),l.xp6(1),l.Q6J("ngIf",e&&!e.extendedProps.principal&&e.id.startsWith("skeleton")),l.xp6(1),l.Q6J("ngIf",e&&!e.extendedProps.principal&&!e.id.startsWith("skeleton"))}}function ua(n,t){if(1&n&&l._UZ(0,"op-wp-loading-skeleton",31),2&n){const e=l.oxw().event;l.Q6J("viewBox",e.extendedProps.viewBox)}}function da(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"wp-single-card",32),l.NdJ("stateLinkClicked",function(o){return l.CHM(e),l.oxw(2).openStateLink(o)})("cardClicked",function(o){return l.CHM(e),l.oxw(2).calendar.onCardClicked(o)})("cardContextMenu",function(o){return l.CHM(e),l.oxw(2).calendar.showEventContextMenu(o)}),l.ALo(1,"async"),l.qZA()}if(2&n){const e=t.ngIf,r=l.oxw(2);l.Q6J("workPackage",e)("selectedWhenOpen",!0)("orientation","horizontal")("highlightingMode","type")("showInfoButton",!0)("disabledInfo",r.showDisabledText(e))("isClosed",r.isStatusClosed(e))("showAsGhost",r.shouldShowAsGhost(e.id,l.lcZ(1,11,r.globalDraggingItem$)))("showAsInlineCard",!0)("showStartDate",!r.isWpStartDateInCurrentView(e))("showEndDate",!r.isWpEndDateInCurrentView(e))}}function fa(n,t){if(1&n&&(l.YNc(0,ua,1,1,"op-wp-loading-skeleton",29),l.YNc(1,da,2,13,"wp-single-card",30)),2&n){const e=t.event;l.Q6J("ngIf",e.source&&"skeleton"===e.source.id),l.xp6(1),l.Q6J("ngIf",(!e.source||"work_packages"===e.source.id)&&e.extendedProps.workPackage)}}function pa(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",33),l.TgZ(1,"button",34),l.NdJ("click",function(){return l.CHM(e),l.oxw().showAssigneeAddRow()}),l._UZ(2,"span",35),l._UZ(3,"span",20),l.qZA(),l.qZA()}if(2&n){const e=l.oxw();l.xp6(3),l.Q6J("textContent",e.text.add_assignee)}}function ha(n,t){if(1&n&&l._UZ(0,"span",40),2&n){const e=l.oxw(3);l.Q6J("textContent",e.text.drag_here_to_remove)}}function va(n,t){if(1&n&&l._UZ(0,"span",40),2&n){const e=l.oxw(3);l.Q6J("textContent",e.text.cannot_drag_here)}}function ga(n,t){if(1&n){const e=l.EpF();l.TgZ(0,"div",37,38),l.NdJ("mouseenter",function(){return l.CHM(e),l.oxw(2).dropzoneHovered$.next(!0)})("mouseleave",function(){return l.CHM(e),l.oxw(2).dropzoneHovered$.next(!1)})("mouseup",function(){l.CHM(e);const o=l.oxw().ngIf,i=l.oxw();return o.canDrop&&i.removeEvent(o.dragging)}),l.YNc(2,ha,1,1,"span",39),l.YNc(3,va,1,1,"span",39),l.qZA()}if(2&n){const e=l.oxw().ngIf;l.ekj("op-team-planner--remove-dropzone_active",e.isHovering&&e.canDrop)("op-team-planner--remove-dropzone_forbidden",!e.canDrop),l.xp6(2),l.Q6J("ngIf",e.canDrop),l.xp6(1),l.Q6J("ngIf",!e.canDrop)}}function ma(n,t){if(1&n&&(l.ynx(0),l.YNc(1,ga,4,6,"div",36),l.BQk()),2&n){const e=t.ngIf;l.xp6(1),l.Q6J("ngIf",e.dragging)}}const ya=function(n){return{"op-team-planner_with_left_side_pane":n}};class oe extends Kt.N{constructor(t,e,r,o,i,s,u,d,c,f,p,h,v,g,m,b,S,C,_,E){super(),this.$state=t,this.configuration=e,this.principalsResourceService=r,this.capabilitiesResourceService=o,this.wpTableFilters=i,this.querySpace=s,this.currentProject=u,this.viewLookup=d,this.I18n=c,this.injector=f,this.calendar=p,this.halEditing=h,this.halNotification=v,this.schemaCache=g,this.apiV3Service=m,this.calendarDrag=b,this.keepTab=S,this.actions$=C,this.toastService=_,this.loadingIndicatorService=E,this.calendarOptions$=new et.xQ,this.draggingItem$=new q.X(void 0),this.globalDraggingItem$=(0,G.aj)([this.draggingItem$,this.calendarDrag.isDragging$]).pipe((0,O.U)(([R,w])=>void 0!==w?w:void 0!==R?R.event.extendedProps.workPackage.id:void 0)),this.dropzoneHovered$=new q.X(!1),this.dropzoneAllowed$=this.draggingItem$.pipe((0,Re.h)(R=>!!R),(0,O.U)(R=>{const w=R.event.extendedProps.workPackage,D=this.calendar.dateEditable(w),k=this.eventResourceEditable(w);return D&&k})),this.dropzone$=(0,G.aj)([this.draggingItem$,this.dropzoneHovered$,this.dropzoneAllowed$]).pipe((0,O.U)(([R,w,D])=>({dragging:R,isHovering:w,canDrop:D}))),this.projectIdentifier=void 0,this.showAddExistingPane=new q.X(!1),this.showAddAssignee$=new q.X(!1),this.principalIds$=this.wpTableFilters.live$().pipe(this.untilDestroyed(),(0,O.U)(R=>{const w=R.find(D=>"assignee"===D.id);return((null==w?void 0:w.values)||[]).map(D=>D.id)})),this.assigneeCaps$=this.wpTableFilters.live$().pipe(this.untilDestroyed(),(0,tt.w)(R=>{const w=[["action","=",["work_packages/assigned"]]],D=R.find(P=>"assignee"===P.id);if(D){const P=D.values.map(H=>H.id);w.push(["principal","=",P])}const k=R.find(P=>"project"===P.id);if(k){const P=k.values.map(H=>`p${H.id}`);w.push(["context","=",P])}else w.push(["context","=",[`p${this.currentProject.id}`]]);return this.capabilitiesResourceService.fetchCapabilities({pageSize:-1,filters:w})}),(0,O.U)(R=>R._embedded.elements.reduce((w,D)=>{const k=D._links.context.href,P=D._links.principal.href,H=w[k]||[];return Object.assign(Object.assign({},w),{[k]:[...H,P]})},{})),(0,_e.O)({}),(0,nt.d)(1)),this.params$=this.principalIds$.pipe(this.untilDestroyed(),(0,Re.h)(R=>R.length>0),(0,O.U)(R=>({filters:[["id","=",R]]}))),this.isEmpty$=(0,G.aj)([this.principalIds$,this.showAddAssignee$]).pipe((0,X.b)(250),(0,O.U)(([R,w])=>(this.loadingIndicatorService.table.stop(),!R.length&&!w))),this.loading$=null,this.assignees=[],this.statuses=[],this.image={empty_state:(0,tn.h)("team-planner/empty-state.svg")},this.text={add_existing:this.I18n.t("js.team_planner.add_existing"),assignee:this.I18n.t("js.label_assignee"),add_assignee:this.I18n.t("js.team_planner.add_assignee"),remove_assignee:this.I18n.t("js.team_planner.remove_assignee"),noData:this.I18n.t("js.team_planner.no_data"),two_weeks:this.I18n.t("js.team_planner.two_weeks"),one_week:this.I18n.t("js.team_planner.one_week"),today:this.I18n.t("js.team_planner.today"),drag_here_to_remove:this.I18n.t("js.team_planner.drag_here_to_remove"),cannot_drag_here:this.I18n.t("js.team_planner.cannot_drag_here"),updating:this.I18n.t("js.ajax.updating"),successful_update:this.I18n.t("js.notice_successful_update")},this.principals$=this.principalIds$.pipe(this.untilDestroyed(),(0,On.zg)(R=>this.principalsResourceService.query.byIds(R)),(0,X.b)(50),(0,rt.x)((R,w)=>R.length===w.length&&0===R.length),(0,nt.d)(1))}set ucCalendarElement(t){this.calendar.resizeObserver(t)}ngOnInit(){this.initializeCalendar(),this.projectIdentifier=this.currentProject.identifier||void 0,this.querySpace.results.values$().pipe(this.untilDestroyed()).subscribe(()=>{this.ucCalendar.getApi().refetchEvents()}),this.calendar.resize$.pipe(this.untilDestroyed(),(0,X.b)(50)).subscribe(()=>{this.ucCalendar.getApi().updateSize()}),this.params$.pipe(this.untilDestroyed()).subscribe(t=>{this.principalsResourceService.fetchPrincipals(t).subscribe()}),(0,G.aj)([this.principals$,this.showAddAssignee$]).pipe(this.untilDestroyed(),(0,X.b)(0)).subscribe(([t,e])=>{const r=this.ucCalendar.getApi();r.getResources().forEach(o=>o.remove()),t.forEach(o=>{const i=o._links.self.href;r.addResource({principal:o,id:i,title:o.name})}),e&&r.addResource({principal:null,id:"NEW",title:""})}),this.showAddAssignee$.next(!1),this.apiV3Service.statuses.get().pipe((0,Ee.q)(1)).subscribe(t=>{this.statuses=t.elements})}ngOnDestroy(){var t;super.ngOnDestroy(),null===(t=this.calendar.resizeObs)||void 0===t||t.disconnect()}initializeCalendar(){this.configuration.initialized.then(()=>{this.calendarOptions$.next(this.calendar.calendarOptions({schedulerLicenseKey:"GPL-My-Project-Is-Open-Source",selectable:!0,plugins:[Ci,Ye.ZP],titleFormat:{year:"numeric",month:"long",day:"numeric"},buttonText:{today:this.text.today},initialView:this.calendar.initialView||"resourceTimelineWeek",headerToolbar:{left:"",center:"title",right:"prev,next today resourceTimelineWeek,resourceTimelineTwoWeeks"},views:{resourceTimelineWeek:{type:"resourceTimeline",buttonText:this.text.one_week,duration:{weeks:1},slotDuration:{days:1},slotLabelFormat:[{weekday:"long",day:"2-digit"}],resourceAreaColumns:[{field:"title",headerContent:{html:`<span class="spot-icon spot-icon_user"></span> <span>${this.text.assignee}</span>`}}]},resourceTimelineTwoWeeks:{type:"resourceTimeline",buttonText:this.text.two_weeks,slotDuration:{days:1},duration:{weeks:2},dateIncrement:{weeks:1},slotLabelFormat:[{weekday:"short",day:"2-digit"}],resourceAreaColumns:[{field:"title",headerContent:{html:`<span class="spot-icon spot-icon_user"></span> <span>${this.text.assignee}</span>`}}]}},progressiveEventRendering:!0,eventSources:[{id:"skeleton",events:Di,editable:!1},{id:"work_packages",events:this.calendarEventsFunction.bind(this)},{events:[],id:"background",color:"red",textColor:"white",display:"background",editable:!1}],resources:we,resourceAreaWidth:"180px",select:this.handleDateClicked.bind(this),resourceLabelContent:t=>this.renderTemplate(this.resourceContent,t.resource.id,t),resourceLabelWillUnmount:t=>this.unrenderTemplate(t.resource.id),editable:!0,droppable:!0,eventResize:t=>this.updateEvent(t),eventDragStart:t=>{var e;if("skeleton"===(null===(e=t.event.source)||void 0===e?void 0:e.id))return;const{el:r}=t;r.style.pointerEvents="none",this.draggingItem$.next(t),this.addBackgroundEvents(t.event)},eventDragStop:t=>{const{el:e}=t;e.style.removeProperty("pointer-events"),this.draggingItem$.next(void 0),this.removeBackGroundEvents()},eventDrop:t=>this.updateEvent(t),eventReceive:t=>(0,N.mG)(this,void 0,void 0,function*(){yield this.updateEvent(t);const e=t.event.extendedProps.workPackage;this.actions$.dispatch(Ke({workPackage:e.id}))}),eventContent:t=>{var e;if("background"!==(null===(e=t.event.source)||void 0===e?void 0:e.id))return this.renderTemplate(this.eventContent,this.eventId(t),t)},eventWillUnmount:t=>{var e;"background"!==(null===(e=t.event.source)||void 0===e?void 0:e.id)&&this.unrenderTemplate(this.eventId(t))}}))})}calendarEventsFunction(t,e,r){this.calendar.currentWorkPackages$.pipe((0,ot.M)(this.assigneeCaps$),(0,Ee.q)(1),(0,Mn.x)(()=>this.clearLoading())).subscribe(([o,i])=>{const s=this.mapToCalendarEvents(o.elements,i);this.viewLookup.destroyDetached(),this.removeExternalEvents(),e(s)},r),this.calendar.updateTimeframe(t,this.projectIdentifier)}clearLoading(){const t=this.loading$;!t||(this.loading$=null,setTimeout(()=>{t.complete(),this.toastService.addSuccess(this.text.successful_update)},500))}renderTemplate(t,e,r){return this.isDraggedEvent(e)&&this.viewLookup.markForDestruction(e),{domNodes:this.viewLookup.getView(t,e,r).rootNodes}}unrenderTemplate(t){this.viewLookup.markForDestruction(t)}isDraggedEvent(t){var e,r;const o=this.draggingItem$.getValue();return!!o&&(null===(r=null===(e=o.event.extendedProps)||void 0===e?void 0:e.workPackage)||void 0===r?void 0:r.href)===t}eventId(t){var e,r;return[t.event.id,null===(e=t.event.start)||void 0===e?void 0:e.toISOString(),null===(r=t.event.end)||void 0===r?void 0:r.toISOString(),t.timeText,`dragging=${t.isDragging.toString()}`,`resizing=${t.isResizing.toString()}`].join("-")}showAssigneeAddRow(){this.showAddAssignee$.next(!0),this.ucCalendar.getApi().refetchEvents()}addAssignee(t){this.showAddAssignee$.next(!1);const e=r=>{r.values=[...r.values,t]};-1===this.wpTableFilters.findIndex("assignee")?this.wpTableFilters.replace("assignee",e.bind(this)):this.wpTableFilters.modify("assignee",e.bind(this))}removeAssignee(t){var e,r;const o=null===(r=null===(e=this.wpTableFilters.find("assignee"))||void 0===e?void 0:e.values)||void 0===r?void 0:r.length;o&&o<=1?this.wpTableFilters.remove("assignee"):this.wpTableFilters.modify("assignee",i=>{i.values=i.values.filter(s=>s.href!==t)})}isWpEndDateInCurrentView(t){const{dueDate:e}=t;if(!e)return!!t.date;const r=this.ucCalendar.getApi().view.currentEnd.setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)<r}isWpStartDateInCurrentView(t){const{startDate:e}=t;if(!e)return!!t.date;const r=this.ucCalendar.getApi().view.currentStart.setHours(0,0,0,0);return new Date(e).setHours(0,0,0,0)>=r}showDisabledText(t){const e=new Date(t.dueDate).setHours(0,0,0,0),r=this.ucCalendar.getApi().view.currentStart.setHours(0,0,0,0);return{text:this.calendarDrag.workPackageDisabledExplanation(t),orientation:e===r?"right":"left"}}isStatusClosed(t){const e=this.statuses.find(r=>r.id===t.status.id);return!!e&&e.isClosed}removeEvent(t){return(0,N.mG)(this,void 0,void 0,function*(){t.el.remove(),t.event.remove();const e=t.event.extendedProps.workPackage,r=this.halEditing.edit(e);r.setValue("assignee",{href:null}),r.setValue("startDate",null),r.setValue("dueDate",null),yield this.saveChangeset(r),this.actions$.dispatch(Xe({workPackage:e.id}))})}mapToCalendarEvents(t,e){return t.map(r=>{if(!r.assignee)return;const o=this.wpAssignee(r),i=this.calendar.eventDurationEditable(r),s=this.eventResourceEditable(r);return{id:`${r.href}-${o}`,resourceId:o,editable:i||s,durationEditable:i,resourceEditable:s,constraint:this.eventConstraints(r,e),title:r.subject,start:this.wpStartDate(r),end:this.wpEndDate(r),backgroundColor:"#FFFFFF",borderColor:"#FFFFFF",allDay:!0,workPackage:r}}).filter(r=>!!r)}handleDateClicked(t){var e;this.openNewSplitCreate(t.startStr,this.calendar.getEndDateFromTimestamp(t.end),(null===(e=t.resource)||void 0===e?void 0:e.id)||"")}openNewSplitCreate(t,e,r){const o={startDate:t,dueDate:e,_links:{assignee:{href:r}}};this.$state.go((0,Xt.W)(this.$state,"new"),{defaults:o,tabIdentifier:"overview"})}openStateLink(t){const e={workPackageId:t.workPackageId};"split"===t.requestedState?this.keepTab.goCurrentDetailsState(e):this.keepTab.goCurrentShowState(e)}shouldShowAsGhost(t,e){return void 0!==e&&t!==e}updateEvent(t){return(0,N.mG)(this,void 0,void 0,function*(){const e=this.calendar.updateDates(t),r=t.event.getResources()[0];r&&e.setValue("assignee",{href:r.id}),this.calendarDrag.handleDrop(e.projectedResource),yield this.saveChangeset(e,t)})}saveChangeset(t,e){var r;return(0,N.mG)(this,void 0,void 0,function*(){try{this.loading$=new et.xQ,this.toastService.addLoading(this.loading$),yield this.halEditing.save(t)}catch(o){null===(r=this.loading$)||void 0===r||r.complete(),this.halNotification.showError(o.resource,t.projectedResource),this.calendarDrag.handleDropError(t.projectedResource),null==e||e.revert()}})}eventResourceEditable(t){var e;const r=this.schemaCache.of(t);return!!(null===(e=r.assignee)||void 0===e?void 0:e.writable)&&r.isAttributeEditable("assignee")}eventConstraints(t,e){const r={};if(!this.calendar.eventDurationEditable(t)&&!t.date&&(r.start=this.wpStartDate(t),r.end=this.wpEndDate(t)),!this.eventResourceEditable(t))return r.resourceIds=[this.wpAssignee(t)],r;const o=e[t.project.href];return o&&(r.resourceIds=[...o]),r}wpStartDate(t){return this.calendar.eventDate(t,"start")}wpEndDate(t){const e=this.calendar.eventDate(t,"due");return moment(e).add(1,"days").format("YYYY-MM-DD")}wpAssignee(t){return t.assignee.href}toggleAddExistingPane(){this.showAddExistingPane.next(!this.showAddExistingPane.getValue()),this.addExistingToggle.nativeElement.blur()}removeExternalEvents(){this.ucCalendar.getApi().getEvents().forEach(t=>{t.id.includes("external")&&t.remove()})}addBackgroundEvents(t){const e=t.extendedProps.workPackage;this.assigneeCaps$.pipe((0,Re.h)(r=>Object.keys(r).length>0),(0,Ee.q)(1),(0,O.U)(r=>r[e.project.href]),(0,ot.M)(this.principals$)).subscribe(([r,o])=>{const i=this.ucCalendar.getApi(),s={start:moment().subtract("1","month").toDate(),end:moment().add("1","month").toDate()};o.forEach(u=>{const d=u._links.self.href;(!r||!r.includes(d))&&i.addEvent(Object.assign(Object.assign({},s),{resourceId:d}),"background")})})}removeBackGroundEvents(){this.ucCalendar.getApi().getEvents().filter(t=>{var e;return"background"===(null===(e=t.source)||void 0===e?void 0:e.id)}).forEach(t=>t.remove())}}oe.\u0275fac=function(t){return new(t||oe)(l.Y36(nn.StateService),l.Y36(xi.e),l.Y36(Ri.P),l.Y36(Pi.a),l.Y36(Ue.Z),l.Y36(Qt.q),l.Y36(Be.R),l.Y36(F),l.Y36(ae.D),l.Y36(l.zs3),l.Y36(se.j),l.Y36(_i.l),l.Y36(en.W),l.Y36(Je.y),l.Y36(Fe.T),l.Y36(U),l.Y36(Ei.p),l.Y36(xe.b),l.Y36(ki.kl),l.Y36(Ti.vt))},oe.\u0275cmp=l.Xpm({type:oe,selectors:[["op-team-planner"]],viewQuery:function(t,e){if(1&t&&(l.Gf(Ce.woE,5),l.Gf(Zi,5,l.SBq),l.Gf($i,5),l.Gf(Yi,5),l.Gf(Ji,5),l.Gf(Qi,5,l.SBq),l.Gf(Xi,5,l.SBq)),2&t){let r;l.iGM(r=l.CRH())&&(e.ucCalendar=r.first),l.iGM(r=l.CRH())&&(e.ucCalendarElement=r.first),l.iGM(r=l.CRH())&&(e.eventContent=r.first),l.iGM(r=l.CRH())&&(e.resourceContent=r.first),l.iGM(r=l.CRH())&&(e.assigneeAutocompleter=r.first),l.iGM(r=l.CRH())&&(e.removeDropzone=r.first),l.iGM(r=l.CRH())&&(e.addExistingToggle=r.first)}},hostBindings:function(t,e){1&t&&l.NdJ("teamPlannerSelectDate",function(o){return e.openNewSplitCreate(o.detail.start,o.detail.end,o.detail.assignee)},!1,l.evT)},features:[l._Bn([F]),l.qOj],decls:17,vars:19,consts:[[1,"op-team-planner",3,"ngClass"],[4,"ngIf"],["data-qa-selector","op-team-planner--calendar-pane",1,"op-team-planner--calendar-pane"],["resourceContent",""],["eventContent",""],["data-qa-selector","op-team-planner-footer",1,"op-team-planner--footer"],["class","op-team-planner--add-assignee",4,"ngIf"],["data-qa-selector","op-team-planner--add-existing-toggle",1,"button","op-team-planner--add-existing-toggle",3,"ngClass","click"],["addExistingToggle",""],["icon-classes","icon-add button--icon"],[1,"button--text",3,"textContent"],["class","op-team-planner--add-existing-pane","data-qa-selector","add-existing-pane",4,"ngIf"],["data-qa-selector","add-existing-pane",1,"op-team-planner--add-existing-pane"],["class","op-team-planner--calendar fc-scroller",3,"options","ngClass",4,"ngIf"],[1,"op-wp-calendar--notification",3,"textContent"],["class","op-team-planner--no-data",4,"ngIf"],[1,"op-team-planner--calendar","fc-scroller",3,"options","ngClass"],["ucCalendar",""],[1,"op-team-planner--no-data"],[1,"op-team-planner--empty-state-image",3,"src"],[3,"textContent"],["type","button","data-qa-selector","op-team-planner--empty-state-button",1,"op-team-planner--empty-state-button","button","-highlight",3,"textContent","click"],["class","tp-assignee",4,"ngIf"],[3,"alreadySelected","selectAssignee",4,"ngIf"],[1,"tp-assignee"],[1,"tp-assignee--principal","op-principal_wrapped",3,"principal"],["type","button",1,"tp-assignee--remove",3,"click"],["icon-classes","icon-remove"],[3,"alreadySelected","selectAssignee"],["class","op-team-planner--wp-loading-skeleton",3,"viewBox",4,"ngIf"],[3,"workPackage","selectedWhenOpen","orientation","highlightingMode","showInfoButton","disabledInfo","isClosed","showAsGhost","showAsInlineCard","showStartDate","showEndDate","stateLinkClicked","cardClicked","cardContextMenu",4,"ngIf"],[1,"op-team-planner--wp-loading-skeleton",3,"viewBox"],[3,"workPackage","selectedWhenOpen","orientation","highlightingMode","showInfoButton","disabledInfo","isClosed","showAsGhost","showAsInlineCard","showStartDate","showEndDate","stateLinkClicked","cardClicked","cardContextMenu"],[1,"op-team-planner--add-assignee"],["type","button","data-qa-selector","tp-assignee-add-button",1,"spot-link",3,"click"],[1,"spot-icon","spot-icon_user-plus"],["class","op-team-planner--remove-dropzone","data-qa-selector","op-team-planner-dropzone",3,"op-team-planner--remove-dropzone_active","op-team-planner--remove-dropzone_forbidden","mouseenter","mouseleave","mouseup",4,"ngIf"],["data-qa-selector","op-team-planner-dropzone",1,"op-team-planner--remove-dropzone",3,"mouseenter","mouseleave","mouseup"],["removeDropzone",""],["class","op-team-planner--dropzone-label",3,"textContent",4,"ngIf"],[1,"op-team-planner--dropzone-label",3,"textContent"]],template:function(t,e){if(1&t&&(l.TgZ(0,"div",0),l.ALo(1,"async"),l.YNc(2,ta,8,9,"ng-container",1),l.ALo(3,"async"),l.TgZ(4,"div",2),l.YNc(5,ia,5,5,"ng-container",1),l.ALo(6,"async"),l.YNc(7,ca,3,3,"ng-template",null,3,l.W1O),l.YNc(9,fa,2,2,"ng-template",null,4,l.W1O),l.TgZ(11,"div",5),l.YNc(12,pa,4,1,"div",6),l.ALo(13,"async"),l.ALo(14,"async"),l.YNc(15,ma,2,1,"ng-container",1),l.ALo(16,"async"),l.qZA(),l.qZA(),l.qZA()),2&t){let r;l.Q6J("ngClass",l.VKq(17,ya,l.lcZ(1,5,e.showAddExistingPane))),l.xp6(2),l.Q6J("ngIf",l.lcZ(3,7,e.calendarOptions$)),l.xp6(3),l.Q6J("ngIf",l.lcZ(6,9,e.calendarOptions$)),l.xp6(7),l.Q6J("ngIf",!(l.lcZ(13,11,e.showAddAssignee$)||null!=(r=l.lcZ(14,13,e.dropzone$))&&r.dragging)),l.xp6(3),l.Q6J("ngIf",l.lcZ(16,15,e.dropzone$))}},directives:[W.mk,W.O5,Ii.o,ee,Ce.woE,Ui.N,te,ne,re,an.P],pipes:[W.Ov],styles:['.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 0 10px 5px #0000001a;z-index:10000!important}[_nghost-%COMP%]{display:block;height:100%;overflow:auto}.op-team-planner[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;grid-template-rows:55px 1fr;grid-template-areas:". calendar" "addExisting calendar";height:100%;overflow:hidden}.op-team-planner--calendar-pane[_ngcontent-%COMP%]{grid-area:calendar;display:flex;flex-direction:column;overflow:hidden}.op-team-planner--calendar[_ngcontent-%COMP%]{overflow:auto}.op-team-planner--add-existing-pane[_ngcontent-%COMP%]{grid-area:addExisting;width:264px;min-width:264px;overflow:auto;margin-right:10px;z-index:2;font-size:14px}.op-team-planner--add-existing-toggle[_ngcontent-%COMP%]{position:absolute}.op-team-planner--footer[_ngcontent-%COMP%]{grid-area:footer;display:flex;margin-top:1rem}.op-team-planner--add-assignee[_ngcontent-%COMP%]{border-right:1px solid transparent}.op-team-planner--remove-dropzone[_ngcontent-%COMP%]{flex:1;border:1px dashed #1A67A3;box-sizing:border-box;height:2.25rem;display:flex;align-items:center;justify-content:center;font-size:14px}.op-team-planner--remove-dropzone_active[_ngcontent-%COMP%]{background:#D1E5F5}.op-team-planner--remove-dropzone_forbidden[_ngcontent-%COMP%]{border-color:var(--content-form-danger-zone-bg-color)}.op-team-planner--remove-dropzone_forbidden[_ngcontent-%COMP%]   .op-team-planner--dropzone-label[_ngcontent-%COMP%]{color:var(--content-form-danger-zone-bg-color)}.op-team-planner--dropzone-label[_ngcontent-%COMP%]{color:#1a67a3}.op-team-planner--no-data[_ngcontent-%COMP%]{min-height:250px;padding:2rem;background-color:#f3f3f3;display:flex;flex-direction:column;justify-content:center;align-items:center}.op-team-planner--empty-state-image[_ngcontent-%COMP%]{width:200px}.op-team-planner--empty-state-button[_ngcontent-%COMP%]{margin:1rem 0}'],changeDetection:0});const ba=[{name:"team_planner",parent:"optional_project",url:"/team_planners/:query_id?query_props&cdate&cview",redirectTo:"team_planner.page",views:{"!$default":{component:vn.p}},params:{query_id:{type:"opQueryId",dynamic:!0},cdate:{type:"string",dynamic:!0},cview:{type:"string",dynamic:!0},query_props:{type:"opQueryString"}}},{name:"team_planner.page",component:j,redirectTo:"team_planner.page.show",data:{bodyClasses:"router--team-planner"}},{name:"team_planner.page.show",data:{baseRoute:"team_planner.page.show"},views:{"content-left":{component:oe}}},...(0,pn.Z)("team_planner.page.show",void 0,hn.o)];var wa=y(21757),Sa=y(87523);class Q{}Q.\u0275fac=function(t){return new(t||Q)},Q.\u0275mod=l.oAB({type:Q}),Q.\u0275inj=l.cJS({imports:[[wa.H,$e.UIRouterModule.forChild({states:ba}),Se.wA,W.ez,cn.Q,dn.j,fn.H,Ce.z1U,un.C,Sa.a]]})},60218:ie=>{ie.exports='\n\n  .fc .fc-resource-timeline-divider {\n    width: 3px; /* important to have width to shrink this cell. no cross-browser problems */\n    cursor: col-resize;\n  }\n\n.fc .fc-resource-group {\n    /* make it look less like a <th> */\n    font-weight: inherit;\n    text-align: inherit;\n  }\n\n.fc {\n\n\n  /* will match horizontal groups in the datagrid AND group lanes in the timeline area */\n\n}\n\n.fc .fc-resource-timeline .fc-resource-group:not([rowspan]) {\n      background: rgba(208, 208, 208, 0.3);\n      background: var(--fc-neutral-bg-color, rgba(208, 208, 208, 0.3));\n    }\n\n.fc .fc-timeline-lane-frame {\n    position: relative; /* contains the fc-timeline-bg container, which liquidly expands */\n    /* the height is explicitly set by row-height-sync */\n  }\n\n.fc .fc-timeline-overlap-enabled .fc-timeline-lane-frame .fc-timeline-events { /* has height set on it */\n    box-sizing: content-box; /* padding no longer part of height */\n    padding-bottom: 10px; /* give extra spacing underneath for selecting */\n  }\n\n/* hack to make bg expand to lane\'s full height in resource-timeline with expandRows (#6134) */\n\n.fc-timeline-body-expandrows td.fc-timeline-lane {\n    position: relative;\n  }\n\n.fc-timeline-body-expandrows .fc-timeline-lane-frame {\n    position: static;\n  }\n\n/* the "frame" */\n\n.fc-datagrid-cell-frame-liquid {\n  height: 100%; /* needs liquid hack */\n}\n\n.fc-liquid-hack .fc-datagrid-cell-frame-liquid {\n  height: auto;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  }\n\n.fc {\n\n  /* the "frame" in a HEADER */\n  /* needs to position the column resizer */\n  /* needs to vertically center content */\n\n}\n\n.fc .fc-datagrid-header .fc-datagrid-cell-frame {\n      position: relative; /* for resizer */\n      display: flex;\n      justify-content: flex-start; /* horizontal align (natural left/right) */\n      align-items: center; /* vertical align */\n    }\n\n.fc {\n\n  /* the column resizer (only in HEADER) */\n\n}\n\n.fc .fc-datagrid-cell-resizer {\n    position: absolute;\n    z-index: 1;\n    top: 0;\n    bottom: 0;\n    width: 5px;\n    cursor: col-resize;\n  }\n\n.fc {\n\n  /* the cushion */\n\n}\n\n.fc .fc-datagrid-cell-cushion {\n    padding: 8px;\n    white-space: nowrap;\n    overflow: hidden; /* problem for col resizer :( */\n  }\n\n.fc {\n\n  /* expander icons */\n\n}\n\n.fc .fc-datagrid-expander {\n    cursor: pointer;\n    opacity: 0.65\n\n  }\n\n.fc .fc-datagrid-expander .fc-icon { /* the expander and spacers before the expander */\n      display: inline-block;\n      width: 1em; /* ensure constant width, esp for empty icons */\n    }\n\n.fc .fc-datagrid-expander-placeholder {\n    cursor: auto;\n  }\n\n.fc .fc-resource-timeline-flat .fc-datagrid-expander-placeholder {\n      display: none;\n    }\n\n.fc-direction-ltr .fc-datagrid-cell-resizer { right: -3px }\n\n.fc-direction-rtl .fc-datagrid-cell-resizer { left: -3px }\n\n.fc-direction-ltr .fc-datagrid-expander { margin-right: 3px }\n\n.fc-direction-rtl .fc-datagrid-expander { margin-left: 3px }\n'},47445:ie=>{ie.exports="\n\n  .fc .fc-timeline-body {\n    min-height: 100%;\n    position: relative;\n    z-index: 1; /* scope slots, bg, etc */\n  }\n/*\nvertical slots in both the header AND the body\n*/\n.fc .fc-timeline-slots {\n    position: absolute;\n    z-index: 1;\n    top: 0;\n    bottom: 0\n  }\n.fc .fc-timeline-slots > table {\n      height: 100%;\n    }\n.fc {\n\n  /* border for both header AND body cells */\n\n}\n.fc .fc-timeline-slot-minor {\n    border-style: dotted;\n  }\n.fc {\n\n  /* header cells (aka \"label\") */\n\n}\n.fc .fc-timeline-slot-frame {\n    display: flex;\n    align-items: center; /* vertical align */\n    justify-content: center; /* horizontal align */\n  }\n.fc .fc-timeline-header-row-chrono { /* a row of times */\n  }\n.fc .fc-timeline-header-row-chrono .fc-timeline-slot-frame {\n      justify-content: flex-start; /* horizontal align left or right */\n    }\n.fc .fc-timeline-header-row:last-child { /* guaranteed NOT to have sticky elements */\n  }\n.fc .fc-timeline-header-row:last-child .fc-timeline-slot-frame {\n      /* so text doesn't bleed out and cause extra scroll */\n      /* (won't work with sticky elements) */\n      overflow: hidden;\n    }\n.fc .fc-timeline-slot-cushion {\n    padding: 4px 5px; /* TODO: unify with fc-col-header? */\n    white-space: nowrap;\n  }\n.fc {\n\n  /* NOTE: how does the top row of cells get horizontally centered? */\n  /* for the non-chrono-row, the fc-sticky system looks for text-align center, */\n  /* and it's a fluke that the default browser stylesheet already does this for <th> */\n  /* TODO: have StickyScrolling look at natural left coord to detect centeredness. */\n\n}\n/* only owns one side, so can do dotted */\n.fc-direction-ltr .fc-timeline-slot { border-right: 0 !important }\n.fc-direction-rtl .fc-timeline-slot { border-left: 0 !important }\n.fc .fc-timeline-now-indicator-container {\n    position: absolute;\n    z-index: 4;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    width: 0;\n  }\n.fc .fc-timeline-now-indicator-arrow,\n  .fc .fc-timeline-now-indicator-line {\n    position: absolute;\n    top: 0;\n    border-style: solid;\n    border-color: red;\n    border-color: var(--fc-now-indicator-color, red);\n  }\n.fc .fc-timeline-now-indicator-arrow {\n    margin: 0 -6px; /* 5, then one more to counteract scroller's negative margins */\n\n    /* triangle pointing down. TODO: mixin */\n    border-width: 6px 5px 0 5px;\n    border-left-color: transparent;\n    border-right-color: transparent;\n  }\n.fc .fc-timeline-now-indicator-line {\n    margin: 0 -1px; /* counteract scroller's negative margins */\n    bottom: 0;\n    border-width: 0 0 0 1px;\n  }\n.fc {\n\n  /* container */\n\n}\n.fc .fc-timeline-events {\n    position: relative;\n    z-index: 3;\n    width: 0; /* for event positioning. will end up on correct side based on dir */\n  }\n.fc {\n\n  /* harness */\n\n}\n.fc .fc-timeline-event-harness,\n  .fc .fc-timeline-more-link {\n    position: absolute;\n    top: 0; /* for when when top can't be computed yet */\n    /* JS will set tht left/right */\n  }\n/* z-index, scoped within fc-timeline-events */\n.fc-timeline-event { z-index: 1 }\n.fc-timeline-event.fc-event-mirror { z-index: 2 }\n.fc-timeline-event {\n  position: relative; /* contains things. TODO: make part of fc-h-event and fc-v-event */\n  display: flex; /* for v-aligning start/end arrows and making fc-event-main stretch all the way */\n  align-items: center;\n  border-radius: 0;\n  padding: 2px 1px;\n  margin-bottom: 1px;\n  font-size: .85em;\n  font-size: var(--fc-small-font-size, .85em)\n\n  /* time and title spacing */\n  /* ---------------------------------------------------------------------------------------------------- */\n}\n.fc-timeline-event .fc-event-main {\n    flex-grow: 1;\n    flex-shrink: 1;\n    min-width: 0; /* important for allowing to shrink all the way */\n  }\n.fc-timeline-event .fc-event-time {\n    font-weight: bold;\n  }\n.fc-timeline-event .fc-event-time,\n  .fc-timeline-event .fc-event-title {\n    white-space: nowrap;\n    padding: 0 2px;\n  }\n/* move 1px away from slot line */\n.fc-direction-ltr .fc-timeline-event.fc-event-end,\n  .fc-direction-ltr .fc-timeline-more-link {\n    margin-right: 1px;\n  }\n.fc-direction-rtl .fc-timeline-event.fc-event-end,\n  .fc-direction-rtl .fc-timeline-more-link {\n    margin-left: 1px;\n  }\n/* make event beefier when overlap not allowed */\n.fc-timeline-overlap-disabled .fc-timeline-event {\n  padding-top: 5px;\n  padding-bottom: 5px;\n  margin-bottom: 0;\n}\n/* arrows indicating the event continues into past/future */\n/* ---------------------------------------------------------------------------------------------------- */\n/* part of the flexbox flow */\n.fc-timeline-event:not(.fc-event-start):before,\n.fc-timeline-event:not(.fc-event-end):after {\n  content: \"\";\n  flex-grow: 0;\n  flex-shrink: 0;\n  opacity: .5;\n\n  /* triangle. TODO: mixin */\n  width: 0;\n  height: 0;\n  margin: 0 1px;\n  border: 5px solid #000; /* TODO: var */\n  border-top-color: transparent;\n  border-bottom-color: transparent;\n}\n/* pointing left */\n.fc-direction-ltr .fc-timeline-event:not(.fc-event-start):before,\n.fc-direction-rtl .fc-timeline-event:not(.fc-event-end):after {\n  border-left: 0;\n}\n/* pointing right */\n.fc-direction-ltr .fc-timeline-event:not(.fc-event-end):after,\n.fc-direction-rtl .fc-timeline-event:not(.fc-event-start):before {\n  border-right: 0;\n}\n/* +more events indicator */\n/* ---------------------------------------------------------------------------------------------------- */\n.fc-timeline-more-link {\n  font-size: .85em;\n  font-size: var(--fc-small-font-size, .85em);\n  color: inherit;\n  color: var(--fc-more-link-text-color, inherit);\n  background: #d0d0d0;\n  background: var(--fc-more-link-bg-color, #d0d0d0);\n  padding: 1px;\n  cursor: pointer;\n}\n.fc-timeline-more-link-inner { /* has fc-sticky */\n  display: inline-block;\n  left: 0;\n  right: 0;\n  padding: 2px;\n}\n.fc .fc-timeline-bg { /* a container for bg content */\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    bottom: 0;\n    width: 0;\n    left: 0; /* will take precedence when LTR */\n    right: 0; /* will take precedence when RTL */ /* TODO: kill */\n  }\n.fc .fc-timeline-bg .fc-non-business { z-index: 1 }\n.fc .fc-timeline-bg .fc-bg-event { z-index: 2 }\n.fc .fc-timeline-bg .fc-highlight { z-index: 3 }\n.fc .fc-timeline-bg-harness {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n  }\n\n"}}]);
//# sourceMappingURL=src_app_features_team-planner_team-planner_team-planner_module_ts.06d95f3425f551ab3397.js.map